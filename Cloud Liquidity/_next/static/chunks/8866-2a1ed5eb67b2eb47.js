(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8866],{98099:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97117);function s(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function l(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function c(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function h(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function u(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),h(e/4294967296>>>0,t,r),h(e>>>0,t,r+4),t}function p(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),d(e>>>0,t,r),d(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=s,t.writeInt16BE=s,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=l,t.readUint32LE=c,t.writeUint32BE=h,t.writeInt32BE=h,t.writeUint32LE=d,t.writeInt32LE=d,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),n=o(e,t+4);return 4294967296*r+n-(n>>31)*4294967296},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=l(e,t);return 4294967296*l(e,t+4)+r-(r>>31)*4294967296},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r},t.writeUint64BE=u,t.writeInt64BE=u,t.writeUint64LE=p,t.writeInt64LE=p,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintBE: array is too short for the given bitLength");for(var n=0,s=1,i=e/8+r-1;i>=r;i--)n+=t[i]*s,s*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintLE: array is too short for the given bitLength");for(var n=0,s=1,i=r;i<r+e/8;i++)n+=t[i]*s,s*=256;return n},t.writeUintBE=function(e,t,r,s){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===s&&(s=0),e%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw Error("writeUintBE value must be an integer");for(var i=1,o=e/8+s-1;o>=s;o--)r[o]=t/i&255,i*=256;return r},t.writeUintLE=function(e,t,r,s){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===s&&(s=0),e%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw Error("writeUintLE value must be an integer");for(var i=1,o=s;o<s+e/8;o++)r[o]=t/i&255,i*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},97117:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},31416:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(46008),s=r(98099),i=r(17309);function o(e,r){return void 0===r&&(r=t.defaultRandomSource),r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(e){void 0===e&&(e=t.defaultRandomSource);var r=o(4,e),n=s.readUint32LE(r);return i.wipe(r),n};var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(e,r,n){if(void 0===r&&(r=a),void 0===n&&(n=t.defaultRandomSource),r.length<2)throw Error("randomString charset is too short");if(r.length>256)throw Error("randomString charset is too long");for(var s="",l=r.length,c=256-256%l;e>0;){for(var h=o(Math.ceil(256*e/c),n),d=0;d<h.length&&e>0;d++){var u=h[d];u<c&&(s+=r.charAt(u%l),e--)}i.wipe(h)}return s}t.randomString=l,t.randomStringForEntropy=function(e,r,n){return void 0===r&&(r=a),void 0===n&&(n=t.defaultRandomSource),l(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},75455:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");for(var t=new Uint8Array(e),r=0;r<t.length;r+=65536)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,65536)));return t},e}();t.BrowserRandomSource=r},58871:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17309),s=function(){function e(){this.isAvailable=!1,this.isInstantiated=!1;var e=r(35883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return e.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");var t=this._crypto.randomBytes(e);if(t.length!==e)throw Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(e),s=0;s<r.length;s++)r[s]=t[s];return n.wipe(t),r},e}();t.NodeRandomSource=s},46008:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(75455),s=r(58871),i=function(){function e(){if(this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new s.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return e.prototype.randomBytes=function(e){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(e)},e}();t.SystemRandomSource=i},17309:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},85828:function(e,t,r){"use strict";r.d(t,{OB:function(){return b},h4:function(){return m},sI:function(){return E}});var n,s,i=r(4942),o=r(31416),a=r(77191),l=r.n(a),c=r(50780),h=r.n(c),d=r(80481);let u="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))",p="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))",f="^".concat("(?<domain>([^?#]*)) wants you to sign in with your Solana account:").concat("\\n(?<address>[a-zA-Z0-9]{32,44})\\n\\n").concat("((?<statement>[^\\n]+)\\n)?").concat("\\nURI: (?<uri>".concat(u,"?)")).concat("\\nVersion: (?<version>1)").concat("\\nChain ID: (?<chainId>[0-9]+)").concat("\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})").concat("\\nIssued At: (?<issuedAt>".concat(p,")")).concat("(\\nExpiration Time: (?<expirationTime>".concat(p,"))?")).concat("(\\nNot Before: (?<notBefore>".concat(p,"))?")).concat("(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?").concat("(\\nResources:(?<resources>(\\n- ".concat(u,"?)+))?"),"$");class g{constructor(e){var t,r,n,s,o,a,l,c,h,d,u,p,g;(0,i.Z)(this,"domain",void 0),(0,i.Z)(this,"address",void 0),(0,i.Z)(this,"statement",void 0),(0,i.Z)(this,"uri",void 0),(0,i.Z)(this,"version",void 0),(0,i.Z)(this,"chainId",void 0),(0,i.Z)(this,"nonce",void 0),(0,i.Z)(this,"issuedAt",void 0),(0,i.Z)(this,"expirationTime",void 0),(0,i.Z)(this,"notBefore",void 0),(0,i.Z)(this,"requestId",void 0),(0,i.Z)(this,"resources",void 0),(0,i.Z)(this,"match",void 0);let m=RegExp(f,"g"),b=m.exec(e);if(!b)throw Error("Message did not match the regular expression.");this.match=b,this.domain=null==b?void 0:null===(t=b.groups)||void 0===t?void 0:t.domain,this.address=null==b?void 0:null===(r=b.groups)||void 0===r?void 0:r.address,this.statement=null==b?void 0:null===(n=b.groups)||void 0===n?void 0:n.statement,this.uri=null==b?void 0:null===(s=b.groups)||void 0===s?void 0:s.uri,this.version=null==b?void 0:null===(o=b.groups)||void 0===o?void 0:o.version,this.nonce=null==b?void 0:null===(a=b.groups)||void 0===a?void 0:a.nonce,this.chainId=parseInt(null==b?void 0:null===(l=b.groups)||void 0===l?void 0:l.chainId),this.issuedAt=null==b?void 0:null===(c=b.groups)||void 0===c?void 0:c.issuedAt,this.expirationTime=null==b?void 0:null===(h=b.groups)||void 0===h?void 0:h.expirationTime,this.notBefore=null==b?void 0:null===(d=b.groups)||void 0===d?void 0:d.notBefore,this.requestId=null==b?void 0:null===(u=b.groups)||void 0===u?void 0:u.requestId,this.resources=null==b?void 0:null===(p=b.groups)||void 0===p?void 0:null===(g=p.resources)||void 0===g?void 0:g.split("\n- ").slice(1)}}class m{constructor(){(0,i.Z)(this,"t",void 0)}}class b{constructor(){(0,i.Z)(this,"domain",void 0),(0,i.Z)(this,"address",void 0),(0,i.Z)(this,"statement",void 0),(0,i.Z)(this,"uri",void 0),(0,i.Z)(this,"version",void 0),(0,i.Z)(this,"chainId",void 0),(0,i.Z)(this,"nonce",void 0),(0,i.Z)(this,"issuedAt",void 0),(0,i.Z)(this,"expirationTime",void 0),(0,i.Z)(this,"notBefore",void 0),(0,i.Z)(this,"requestId",void 0),(0,i.Z)(this,"resources",void 0)}}(n=s||(s={})).EXPIRED_MESSAGE="Expired message.",n.INVALID_DOMAIN="Invalid domain.",n.DOMAIN_MISMATCH="Domain do not match provided domain for verification.",n.NONCE_MISMATCH="Nonce do not match provided nonce for verification.",n.INVALID_ADDRESS="Invalid address.",n.INVALID_URI="URI does not conform to RFC 3986.",n.INVALID_NONCE="Nonce size smaller then 8 characters or is not alphanumeric.",n.NOT_YET_VALID_MESSAGE="Message is not valid yet.",n.INVALID_SIGNATURE="Signature do not match address of the message.",n.INVALID_TIME_FORMAT="Invalid time format.",n.INVALID_MESSAGE_VERSION="Invalid message version.",n.UNABLE_TO_PARSE="Unable to parse the message.",n.MALFORMED_SESSION="Malformed Session";class y extends Error{constructor(e,t,r){super(e),(0,i.Z)(this,"type",void 0),(0,i.Z)(this,"expected",void 0),(0,i.Z)(this,"received",void 0),this.type=e,this.expected=t,this.received=r}}class E{constructor(e){if((0,i.Z)(this,"header",void 0),(0,i.Z)(this,"payload",void 0),(0,i.Z)(this,"signature",void 0),"string"==typeof e){let t=new g(e);this.payload={domain:t.domain,address:t.address,statement:t.statement,uri:t.uri,version:t.version,nonce:t.nonce,issuedAt:t.issuedAt,expirationTime:t.expirationTime,notBefore:t.notBefore,requestId:t.requestId,chainId:t.chainId,resources:t.resources}}else Object.assign(this,e),"string"==typeof this.payload.chainId&&(this.payload.chainId=parseInt(this.payload.chainId)),this.payload.nonce||(this.payload.nonce=(0,o.randomStringForEntropy)(96))}toMessage(){this.validate();let e="".concat(this.payload.domain," wants you to sign in with your Solana account:"),t="URI: ".concat(this.payload.uri),r=[e,this.payload.address].join("\n"),n="Version: ".concat(this.payload.version),s="Chain ID: ".concat(this.payload.chainId)||0,i="Nonce: ".concat(this.payload.nonce),o=[t,n,s,i];if(this.payload.issuedAt&&Date.parse(this.payload.issuedAt),this.payload.issuedAt=this.payload.issuedAt?this.payload.issuedAt:new Date().toISOString(),o.push("Issued At: ".concat(this.payload.issuedAt)),this.payload.expirationTime){let e="Expiration Time: ".concat(this.payload.expirationTime);o.push(e)}this.payload.notBefore&&o.push("Not Before: ".concat(this.payload.notBefore)),this.payload.requestId&&o.push("Request ID: ".concat(this.payload.requestId)),this.payload.resources&&o.push(["Resources:",...this.payload.resources.map(e=>"- ".concat(e))].join("\n"));let a=o.join("\n");return r=[r,this.payload.statement].join("\n\n"),this.payload.statement&&(r+="\n"),[r,a].join("\n")}prepareMessage(){let e;return this.payload.version,this.toMessage()}validate(){if(0===this.payload.domain.length||!/[^#?]*/.test(this.payload.domain))throw new y(s.INVALID_DOMAIN,"".concat(this.payload.domain," to be a valid domain."));if(!d.isUri(this.payload.uri))throw new y(s.INVALID_URI,"".concat(this.payload.uri," to be a valid uri."));if("1"!==this.payload.version)throw new y(s.INVALID_MESSAGE_VERSION,"1",this.payload.version);let e=this.payload.nonce.match(/[a-zA-Z0-9]{8,}/);if(!e||this.payload.nonce.length<8||e[0]!==this.payload.nonce)throw new y(s.INVALID_NONCE,"Length > 8 (".concat(e.length,"). Alphanumeric."),this.payload.nonce);let t=/([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))/;if(this.payload.issuedAt&&!t.test(this.payload.issuedAt)||this.payload.expirationTime&&!t.test(this.payload.expirationTime)||this.payload.notBefore&&!t.test(this.payload.notBefore))throw Error(s.INVALID_TIME_FORMAT)}async verify(e){return new Promise(t=>{let{payload:r,signature:n}=e;r.domain&&r.domain!==this.payload.domain&&t({success:!1,data:this,error:new y(s.DOMAIN_MISMATCH,r.domain,this.payload.domain)}),r.nonce&&r.nonce!==this.payload.nonce&&t({success:!1,data:this,error:new y(s.NONCE_MISMATCH,r.nonce,this.payload.nonce)});let i=new Date;if(this.payload.expirationTime){let e=new Date(this.payload.expirationTime);i.getTime()>=e.getTime()&&t({success:!1,data:this,error:new y(s.EXPIRED_MESSAGE,"".concat(i.toISOString()," < ").concat(e.toISOString()),"".concat(i.toISOString()," >= ").concat(e.toISOString()))})}if(this.payload.notBefore){let e=new Date(this.payload.notBefore);i.getTime()<e.getTime()&&t({success:!1,data:this,error:new y(s.EXPIRED_MESSAGE,"".concat(i.toISOString()," >= ").concat(e.toISOString()),"".concat(i.toISOString()," < ").concat(e.toISOString()))})}let o=this.prepareMessage(),a=new TextEncoder().encode(o),c=h().sign.detached.verify(a,l().decode(n.s),l().decode(r.address));c||t({success:!1,data:this,error:new y(s.INVALID_SIGNATURE,"Signature verfication failed")}),t({success:!0,data:this})})}}},75528:function(e,t,r){var n=r(48764).Buffer;e.exports=function(e){let t;let s="api.js: ",i=this,o=r(28737),a=r(20979),l=r(1789),c=new(r(73737)),{attributes:h,showAttributes:d,showAttributeErrors:u,showRuleDependencies:p}=r(68862),f=r(2595),g=function(e,t,r){let n;let s=`<span class="${o.style.CLASS_CTRLCHAR}">`,i="</span>",a=`<span class="${o.style.CLASS_NOMATCH}">`,l="</span>",c="";for(;Array.isArray(e)&&0!==e.length;){if("number"!=typeof t)throw Error("abnfToHtml: beg must be type number");if(t>=e.length)break;n="number"!=typeof r||t+r>=e.length?e.length:t+r;let h=0;for(let r=t;r<n;r+=1){let t=e[r];if(t>=32&&t<=126)switch(1===h?(c+=i,h=0):2===h&&(c+=l,h=0),t){case 32:c+="&nbsp;";break;case 60:c+="&lt;";break;case 62:c+="&gt;";break;case 38:c+="&amp;";break;case 34:c+="&quot;";break;case 39:c+="&#039;";break;case 92:c+="&#092;";break;default:c+=String.fromCharCode(t)}else 9===t||10===t||13===t?(0===h?(c+=s,h=1):2===h&&(c+=l+s,h=1),9===t&&(c+="TAB"),10===t&&(c+="LF"),13===t&&(c+="CR")):(0===h?(c+=a,h=2):1===h&&(c+=i+a,h=2),c+=`\\x${o.utils.charToHex(t)}`)}2===h&&(c+=l),1===h&&(c+=i);break}return c},m=function(e,t,r){let n="";for(let s=t;s<t+r;s+=1){let t=e[s];if(t>=32&&t<=126)n+=String.fromCharCode(t);else switch(t){case 9:n+="\\t";break;case 10:n+="\\n";break;case 13:n+="\\r";break;default:n+="\\unknown"}}return n},b=function(e){let t="Annotated Input Grammar";return e.forEach(e=>{t+=`
line no: ${e.lineNo} : char index: ${e.beginChar} : length: ${e.length} : abnf: ${m(i.chars,e.beginChar,e.length)}`}),t+="\n"},y=function(e){let t="";return t+=`<table class="${o.style.CLASS_GRAMMAR}">
<caption>Annotated Input Grammar</caption>
<tr><th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th></tr>
`,e.forEach(e=>{t+=`<tr><td>${e.lineNo}</td><td>${e.beginChar}</td><td>${e.length}</td><td>${g(i.chars,e.beginChar,e.length)}</td></tr>
`}),t+="</table>\n"},E=function(e,t,r,n){let[s]=o,i="",a=`<span class="${s.CLASS_NOMATCH}">&raquo;</span>`;return i+=`<p><table class="${s.CLASS_GRAMMAR}">
`,n&&"string"==typeof n&&(i+=`<caption>${n}</caption>
`),i+="<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>\n",e.forEach(e=>{let n,s,l,c,h;let d="",u="";0===t.length||(l=(n=t[e.line]).beginChar,e.char>l&&(d=g(r,l,e.char-l)),(l=e.char)<(c=n.beginChar+n.length)&&(u=g(r,l,c-l)),i+=`<tr><td>${e.line}</td><td>${n.beginChar}</td><td>${e.char-n.beginChar}</td><td>${d+a+u}</td></tr>
<tr><td colspan="3"></td><td>&uarr;:&nbsp;${o.utils.stringToAsciiHtml(e.msg)}</td></tr>
`)}),i+="</table></p>\n"},T=function(e,t,r){let n,s,i;return n="",e.forEach(e=>{n+=`${(s=t[e.line]).lineNo}: ${s.beginChar}: ${e.char-s.beginChar}: `+(m(r,s.beginChar,e.char-s.beginChar)+" >> ")+(m(r,e.char,s.beginChar+s.length-e.char)+"\n"+`${s.lineNo}: `+`${s.beginChar}: `+`${e.char-s.beginChar}: `+"error: "+e.msg+"\n")}),n},A=!1,x=!1,k=!1,S=!1,w=0;if(this.errors=[],n.isBuffer(e))this.chars=a.decode("BINARY",e);else if(Array.isArray(e))this.chars=e.slice();else if("string"==typeof e)this.chars=a.decode("STRING",e);else throw Error(`${s}input source is not a string, byte Buffer or character array`);this.sabnf=a.encode("STRING",this.chars),this.scan=function(e,t){this.lines=l(this.chars,this.errors,e,t),A=!0},this.parse=function(e,t){if(!A)throw Error(`${s}grammar not scanned`);c.syntax(this.chars,this.lines,this.errors,e,t),x=!0},this.translate=function(){if(!x)throw Error(`${s}grammar not scanned and parsed`);let e=c.semantic(this.chars,this.lines,this.errors);0===this.errors.length&&(this.rules=e.rules,this.udts=e.udts,t=e.lineMap,k=!0)},this.attributes=function(){if(!k)throw Error(`${s}grammar not scanned, parsed and translated`);return w=h(this.rules,this.udts,t,this.errors),S=!0,w},this.generate=function(e){if(this.lines=l(this.chars,this.errors,e),this.errors.length||(c.syntax(this.chars,this.lines,this.errors,e),this.errors.length))return;let r=c.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=r.rules,this.udts=r.udts,t=r.lineMap,w=h(this.rules,this.udts,t,this.errors),S=!0)},this.displayRules=function(e="index"){if(!k)throw Error(`${s}grammar not scanned, parsed and translated`);return f(this.rules,this.udts,e)},this.displayRuleDependencies=function(e="index"){if(!S)throw Error(`${s}no attributes - must be preceeded by call to attributes()`);return p(e)},this.displayAttributes=function(e="index"){if(!S)throw Error(`${s}no attributes - must be preceeded by call to attributes()`);return w&&u(e),d(e)},this.displayAttributeErrors=function(){if(!S)throw Error(`${s}no attributes - must be preceeded by call to attributes()`);return u()},this.toSource=function(e){if(!S)throw Error(`${s}can't generate parser source - must be preceeded by call to attributes()`);if(w)throw Error(`${s}can't generate parser source - attributes have ${w} errors`);return c.generateSource(this.chars,this.lines,this.rules,this.udts,e)},this.toObject=function(){if(!S)throw Error(`${s}can't generate parser source - must be preceeded by call to attributes()`);if(w)throw Error(`${s}can't generate parser source - attributes have ${w} errors`);return c.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return T(this.errors,this.lines,this.chars)},this.errorsToHtml=function(e){return E(this.errors,this.lines,this.chars,e)},this.linesToAscii=function(){return b(this.lines)},this.linesToHtml=function(){return y(this.lines)}}},68862:function(e,t,r){e.exports=function(){let e=r(58276),{ruleAttributes:t,showAttributes:n,showAttributeErrors:s}=r(94246),{ruleDependencies:i,showRuleDependencies:o}=r(37008);class a{constructor(e,t){this.rules=e,this.udts=t,this.ruleCount=e.length,this.udtCount=t.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let t=0;t<this.ruleCount;t+=1)this.attrs.push(this.attrGen(this.rules[t])),this.attrsWorking.push(this.attrGen(this.rules[t])),this.ruleDeps.push(this.rdGen(e[t],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(e){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:e}}attrInit(e){e.left=!1,e.nested=!1,e.right=!1,e.empty=!1,e.finite=!1,e.cyclic=!1,e.leaf=!1,e.isOpen=!1,e.isComplete=!1}attrCopy(e,t){e.left=t.left,e.nested=t.nested,e.right=t.right,e.empty=t.empty,e.finite=t.finite,e.cyclic=t.cyclic,e.leaf=t.leaf,e.isOpen=t.isOpen,e.isComplete=t.isComplete,e.rule=t.rule}rdGen(t,r,n){let s={rule:t,recursiveType:e.ATTR_N,groupNumber:-1,refersTo:this.falseArray(r),refersToUdt:this.falseArray(n),referencedBy:this.falseArray(r)};return s}typeToString(t){switch(t){case e.ATTR_N:return" N";case e.ATTR_R:return" R";case e.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(e){let t=[];if(e>0)for(let r=0;r<e;r+=1)t.push(!1);return t}falsifyArray(e){for(let t=0;t<e.length;t+=1)e[t]=!1}indexArray(e){let t=[];if(e>0)for(let r=0;r<e;r+=1)t.push(r);return t}compRulesAlpha(e,t){return this.rules[e].lower<this.rules[t].lower?-1:this.rules[e].lower>this.rules[t].lower?1:0}compUdtsAlpha(e,t){return this.udts[e].lower<this.udts[t].lower?-1:this.udts[e].lower>this.udts[t].lower?1:0}compRulesType(e,t){return this.ruleDeps[e].recursiveType<this.ruleDeps[t].recursiveType?-1:this.ruleDeps[e].recursiveType>this.ruleDeps[t].recursiveType?1:0}compRulesGroup(t,r){if(this.ruleDeps[t].recursiveType===e.ATTR_MR&&this.ruleDeps[r].recursiveType===e.ATTR_MR){if(this.ruleDeps[t].groupNumber<this.ruleDeps[r].groupNumber)return -1;if(this.ruleDeps[t].groupNumber>this.ruleDeps[r].groupNumber)return 1}return 0}}return{attributes:function(e=[],r=[],n=[],s=[]){let o=new a(e,r);return i(o),t(o),o.attrsErrorCount&&s.push({line:0,char:0,msg:`${o.attrsErrorCount} attribute errors`}),o.attrsErrorCount},showAttributes:n,showAttributeErrors:s,showRuleDependencies:o}}()},73737:function(e,t,r){e.exports=function(){let e=r(28737),t=e.ids,n=new(r(74216)),s=new(r(11832)),i=new(r(33610)),o=new e.parser;o.ast=new e.ast,o.callbacks=n.callbacks,o.ast.callbacks=s.callbacks;let a=function(e,t,r){if(t<0||t>=r)return -1;for(let r=0;r<e.length;r+=1)if(t>=e[r].beginChar&&t<e[r].beginChar+e[r].length)return r;return -1},l=function(e,t){let r=-1;if(t<e.length){for(let n=t;n<e.length;n+=1)if(null!==e[n]){r=e[n];break}}return r},c=function(e){e.forEach(e=>{let r=[],n=[],s=0;e.opcodes.forEach(e=>{e.type===t.ALT&&1===e.children.length?n.push(null):e.type===t.CAT&&1===e.children.length?n.push(null):e.type===t.REP&&1===e.min&&1===e.max?n.push(null):(n.push(s),r.push(e),s+=1)}),n.push(s),r.forEach(e=>{if(e.type===t.ALT||e.type===t.CAT)for(let t=0;t<e.children.length;t+=1)e.children[t]=l(n,e.children[t])}),e.opcodes=r})};this.syntax=function(e,t,r,n,s){if(s){if("traceObject"!==s.traceObject)throw TypeError("parser: trace argument is not a trace object");o.trace=s}let l={};l.errors=r,l.strict=!!n,l.lines=t,l.findLine=a,l.charsLength=e.length,l.ruleCount=0;let c=o.parse(i,"file",e,l);c.success||r.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(e,t,r){let n={};return(n.errors=r,n.lines=t,n.findLine=a,n.charsLength=e.length,o.ast.translate(n),r.length)?null:(c(n.rules),{rules:n.rules,udts:n.udts,lineMap:n.rulesLineMap})},this.generateSource=function(e,r,n,s,i){let o,a,l,c,h="",d=0,u=1/0,p=0,f=[],g=[],m=0,b=0,y=0,E=0,T=0,A=0,x=0,k=0,S=0,w=0,C=0,M=0,v=0,O=0,$=0;n.forEach(e=>{f.push(e.lower),d+=e.opcodes.length,e.opcodes.forEach(e=>{switch(e.type){case t.ALT:m+=1;break;case t.CAT:b+=1;break;case t.RNM:y+=1;break;case t.UDT:E+=1;break;case t.REP:T+=1;break;case t.AND:A+=1;break;case t.NOT:x+=1;break;case t.BKA:M+=1;break;case t.BKN:v+=1;break;case t.BKR:C+=1;break;case t.ABG:O+=1;break;case t.AEN:$+=1;break;case t.TLS:for(k+=1,o=0;o<e.string.length;o+=1)e.string[o]<u&&(u=e.string[o]),e.string[o]>p&&(p=e.string[o]);break;case t.TBS:for(S+=1,o=0;o<e.string.length;o+=1)e.string[o]<u&&(u=e.string[o]),e.string[o]>p&&(p=e.string[o]);break;case t.TRG:w+=1,e.min<u&&(u=e.min),e.max>p&&(p=e.max);break;default:throw Error("generateSource: unrecognized opcode")}})}),f.sort(),s.length>0&&(s.forEach(e=>{g.push(e.lower)}),g.sort());let L="module.exports";return i&&"string"==typeof i&&(L=`let ${i}`),h+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
//
// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
${L} = function grammar(){
  // \`\`\`
  // SUMMARY
  //      rules = ${n.length}
  //       udts = ${s.length}
  //    opcodes = ${d}
  //        ---   ABNF original opcodes
  //        ALT = ${m}
  //        CAT = ${b}
  //        REP = ${T}
  //        RNM = ${y}
  //        TLS = ${k}
  //        TBS = ${S}
  //        TRG = ${w}
  //        ---   SABNF superset opcodes
  //        UDT = ${E}
  //        AND = ${A}
  //        NOT = ${x}
  //        BKA = ${M}
  //        BKN = ${v}
  //        BKR = ${C}
  //        ABG = ${O}
  //        AEN = ${$}
  // characters = [`,k+S+w===0?h+=" none defined ]":h+=`${u} - ${p}]`,E>0&&(h+=" + user defined"),h+="\n  // ```\n  /* OBJECT IDENTIFIER (for internal parser use) */\n  this.grammarObject = 'grammarObject';\n\n  /* RULES */\n  this.rules = [];\n",n.forEach((e,t)=>{let r="  this.rules[";r+=t+"] = {name: '"+e.name+"', lower: '"+e.lower+"', index: "+e.index+", isBkr: "+e.isBkr+"};\n",h+=r}),h+="\n  /* UDTS */\n  this.udts = [];\n",s.length>0&&s.forEach((e,t)=>{let r="  this.udts[";r+=t+"] = {name: '"+e.name+"', lower: '"+e.lower+"', index: "+e.index+", empty: "+e.empty+", isBkr: "+e.isBkr+"};\n",h+=r}),h+="\n  /* OPCODES */\n",n.forEach((e,r)=>{r>0&&(h+="\n"),h+=`  /* ${e.name} */
  this.rules[${r}].opcodes = [];
`,e.opcodes.forEach((e,i)=>{let o;switch(e.type){case t.ALT:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, children: [${e.children.toString()}]};// ALT
`;break;case t.CAT:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, children: [${e.children.toString()}]};// CAT
`;break;case t.RNM:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, index: ${e.index}};// RNM(${n[e.index].name})
`;break;case t.BKR:e.index>=n.length?(a=s[e.index-n.length].name,l=s[e.index-n.length].lower):(a=n[e.index].name,l=n[e.index].lower),o="%i",e.bkrCase===t.BKR_MODE_CS&&(o="%s"),e.bkrMode===t.BKR_MODE_UM?o+="%u":o+="%p",h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, index: ${e.index}, lower: '${l}', bkrCase: ${e.bkrCase}, bkrMode: ${e.bkrMode}};// BKR(\\${a=o+a})
`;break;case t.UDT:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, empty: ${e.empty}, index: ${e.index}};// UDT(${s[e.index].name})
`;break;case t.REP:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, min: ${e.min}, max: ${e.max}};// REP
`;break;case t.AND:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}};// AND
`;break;case t.NOT:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}};// NOT
`;break;case t.ABG:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}};// ABG(%^)
`;break;case t.AEN:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}};// AEN(%$)
`;break;case t.BKA:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}};// BKA
`;break;case t.BKN:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}};// BKN
`;break;case t.TLS:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, string: [${e.string.toString()}]};// TLS
`;break;case t.TBS:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, string: [${e.string.toString()}]};// TBS
`;break;case t.TRG:h+=`  this.rules[${r}].opcodes[${i}] = {type: ${e.type}, min: ${e.min}, max: ${e.max}};// TRG
`;break;default:throw Error("parser.js: ~143: unrecognized opcode")}})}),h+='\n  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n  this.toString = function toString(){\n    let str = "";\n',r.forEach(t=>{let r=t.beginChar+t.length;c="",h+='    str += "';for(let n=t.beginChar;n<r;n+=1){switch(e[n]){case 9:c=" ";break;case 10:c="\\n";break;case 13:c="\\r";break;case 34:c='\\"';break;case 92:c="\\\\";break;default:c=String.fromCharCode(e[n])}h+=c}h+='";\n'}),h+="    return str;\n  }\n}\n"},this.generateObject=function(e,t,r){let n={},s=[],i=[],o=e.slice(0);return n.grammarObject="grammarObject",t.forEach(e=>{s.push(e.lower)}),s.sort(),r.length>0&&(r.forEach(e=>{i.push(e.lower)}),i.sort()),n.callbacks=[],s.forEach(e=>{n.callbacks[e]=!1}),r.length>0&&i.forEach(e=>{n.callbacks[e]=!1}),n.rules=t,n.udts=r,n.toString=function(){return o},n}}},94246:function(e,t,r){e.exports=function(){let e=r(58276),t=null;function n(e){return!e.left&&!e.nested&&!e.right&&!e.cyclic&&e.empty}function s(e){return!!e.left||!!e.nested||!!e.right||!!e.cyclic}let i=r=>{t=r;let i=0,o=0,a=t.attrGen();for(i=0;i<t.ruleCount;i+=1){for(o=0;o<t.ruleCount;o+=1)t.attrInit(t.attrsWorking[o]);t.startRule=i,function t(r,i,o){let a=r.attrsWorking[i];a.isComplete?r.attrCopy(o,a):a.isOpen?i===r.startRule?i===r.startRule&&(o.left=!0,o.right=!0,o.cyclic=!0,o.leaf=!0):o.finite=!0:(a.isOpen=!0,function r(i,o,a,l){i.attrInit(l);let c=o[a];switch(c.type){case e.ALT:!function(e,t,n,s){let i=0,o=t[n],a=o.children.length,l=[];for(i=0;i<a;i+=1)l.push(e.attrGen());for(i=0;i<a;i+=1)r(e,t,o.children[i],l[i]);for(i=0,s.left=!1,s.right=!1,s.nested=!1,s.empty=!1,s.finite=!1,s.cyclic=!1;i<a;i+=1)l[i].left&&(s.left=!0),l[i].nested&&(s.nested=!0),l[i].right&&(s.right=!0),l[i].empty&&(s.empty=!0),l[i].finite&&(s.finite=!0),l[i].cyclic&&(s.cyclic=!0)}(i,o,a,l);break;case e.CAT:!function(e,t,i,o){let a=0,l=t[i],c=l.children.length,h=[];for(a=0;a<c;a+=1)h.push(e.attrGen());for(a=0;a<c;a+=1)r(e,t,l.children[a],h[a]);o.left=function(e,t){for(let r=0;r<t;r+=1){if(e[r].left)return!0;if(!e[r].empty)break}return!1}(h,c),o.right=function(e,t){for(let r=t-1;r>=0;r-=1){if(e[r].right)return!0;if(!e[r].empty)break}return!1}(h,c),o.nested=function(e,t){let r=0,i=0,o=0;for(r=0;r<t;r+=1)if(e[r].nested)return!0;for(r=0;r<t;r+=1)if(e[r].right&&!e[r].leaf){for(i=r+1;i<t;i+=1)if(!n(e[i]))return!0}for(r=t-1;r>=0;r-=1)if(e[r].left&&!e[r].leaf){for(i=r-1;i>=0;i-=1)if(!n(e[i]))return!0}for(r=0;r<t;r+=1)if(!e[r].empty&&!s(e[r])){for(i=r+1;i<t;i+=1)if(s(e[i])){for(o=i+1;o<t;o+=1)if(!e[o].empty&&!s(e[o]))return!0}}return!1}(h,c),o.empty=function(e,t){for(let r=0;r<t;r+=1)if(!e[r].empty)return!1;return!0}(h,c),o.finite=function(e,t){for(let r=0;r<t;r+=1)if(!e[r].finite)return!1;return!0}(h,c),o.cyclic=function(e,t){for(let r=0;r<t;r+=1)if(!e[r].cyclic)return!1;return!0}(h,c)}(i,o,a,l);break;case e.REP:r(i,o,a+1,l),0===c.min&&(l.empty=!0,l.finite=!0);break;case e.RNM:t(i,o[a].index,l);break;case e.BKR:!function(e,r,n,s){let i=r[n];i.index>=e.ruleCount?(s.empty=e.udts[i.index-e.ruleCount].empty,s.finite=!0):(t(e,i.index,s),s.left=!1,s.nested=!1,s.right=!1,s.cyclic=!1)}(i,o,a,l);break;case e.AND:case e.NOT:case e.BKA:case e.BKN:r(i,o,a+1,l),l.empty=!0;break;case e.TLS:l.empty=!o[a].string.length,l.finite=!0,l.cyclic=!1;break;case e.TBS:case e.TRG:l.empty=!1,l.finite=!0,l.cyclic=!1;break;case e.UDT:l.empty=c.empty,l.finite=!0,l.cyclic=!1;break;case e.ABG:case e.AEN:l.empty=!0,l.finite=!0,l.cyclic=!1;break;default:throw Error(`unknown opcode type: ${c}`)}}(r,a.rule.opcodes,0,o),a.left=o.left,a.right=o.right,a.nested=o.nested,a.empty=o.empty,a.finite=o.finite,a.cyclic=o.cyclic,a.leaf=!1,a.isOpen=!1,a.isComplete=!0)}(t,i,a),t.attrCopy(t.attrs[i],t.attrsWorking[i])}t.attributesComplete=!0;let l=null;for(i=0;i<t.ruleCount;i+=1)if((l=t.attrs[i]).left||!l.finite||l.cyclic){let e=t.attrGen(l.rule);t.attrCopy(e,l),t.attrsErrors.push(e),t.attrsErrorCount+=1}},o=e=>e?"t":"f",a=e=>e?"e":"f",l=e=>e?"t":"e",c=(r,n,s,i)=>`${r}:${n}:`+(`${a(s.left)} ${o(s.nested)} ${o(s.right)} ${a(s.cyclic)} ${l(s.finite)} ${o(s.empty)}:${t.typeToString(i.recursiveType)}:`+(i.recursiveType===e.ATTR_MR?i.groupNumber:"-"))+`:${s.rule.name}
`,h=()=>"LEGEND - t=true, f=false, e=error\nsequence:rule index:left nested right cyclic finite empty:type:group number:rule name\n",d=()=>{let e=null,r=null,n="";if(n+="RULE ATTRIBUTES WITH ERRORS\n"+h(),t.attrsErrorCount)for(let s=0;s<t.attrsErrorCount;s+=1)e=t.attrsErrors[s],r=t.ruleDeps[e.rule.index],n+=c(s,e.rule.index,e,r);else n+="<none>\n";return n},u=e=>{let r=0,n=0,s=null,i=null,o="",{ruleIndexes:a}=t;for(97===e?a=t.ruleAlphaIndexes:116===e&&(a=t.ruleTypeIndexes),r=0;r<t.ruleCount;r+=1)n=a[r],s=t.attrs[n],i=t.ruleDeps[n],o+=c(r,n,s,i);return o},p=(e="index")=>{if(!t.attributesComplete)throw Error("rule-attributes.js:showAttributes: attributes not available");let r="",n="RULE ATTRIBUTES\n";return 97===e.charCodeAt(0)?r+="alphabetical by rule name\n"+n+h()+u(97):116===e.charCodeAt(0)?r+="ordered by rule type\n"+n+h()+u(116):r+="ordered by rule index\n"+n+h()+u(),r};return{ruleAttributes:i,showAttributes:p,showAttributeErrors:d}}()},37008:function(e,t,r){e.exports=(()=>{let e=r(58276),t=null,n=(t,r,s,i)=>{let o=0,a=0,l=r[s];i[s]=!0;let c=l.rule.opcodes;for(o=0;o<c.length;o+=1){let s=c[o];if(s.type===e.RNM)for(l.refersTo[s.index]=!0,i[s.index]||n(t,r,s.index,i),a=0;a<t;a+=1)r[s.index].refersTo[a]&&(l.refersTo[a]=!0);else s.type===e.UDT?l.refersToUdt[s.index]=!0:s.type!==e.BKR||(s.index<t?(l.refersTo[s.index]=!0,i[s.index]||n(t,r,s.index,i)):l.refersToUdt[t-s.index]=!0)}},s=r=>{let s=0,i=0,o=0,a=null,l=null,c=!1;(t=r).dependenciesComplete=!1;let h=t.falseArray(t.ruleCount);for(s=0;s<t.ruleCount;s+=1)t.falsifyArray(h),n(t.ruleCount,t.ruleDeps,s,h);for(s=0;s<t.ruleCount;s+=1)for(i=0;i<t.ruleCount;i+=1)s!==i&&t.ruleDeps[i].refersTo[s]&&(t.ruleDeps[s].referencedBy[i]=!0);for(s=0;s<t.ruleCount;s+=1)t.ruleDeps[s].recursiveType=e.ATTR_N,t.ruleDeps[s].refersTo[s]&&(t.ruleDeps[s].recursiveType=e.ATTR_R);for(s=0,o=-1;s<t.ruleCount;s+=1)if((a=t.ruleDeps[s]).recursiveType===e.ATTR_R)for(i=0,c=!0;i<t.ruleCount;i+=1)s!==i&&(l=t.ruleDeps[i]).recursiveType===e.ATTR_R&&a.refersTo[i]&&l.refersTo[s]&&(c&&(o+=1,a.recursiveType=e.ATTR_MR,a.groupNumber=o,c=!1),l.recursiveType=e.ATTR_MR,l.groupNumber=o);t.isMutuallyRecursive=o>-1,t.ruleAlphaIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesAlpha),t.ruleTypeIndexes.sort(t.compRulesType),t.isMutuallyRecursive&&t.ruleTypeIndexes.sort(t.compRulesGroup),t.udtCount&&t.udtAlphaIndexes.sort(t.compUdtsAlpha),t.dependenciesComplete=!0},i=(e=null)=>{let r=0,n=0,s=0,i=0,o=t.ruleCount-1,a=t.udtCount-1,l="",c="",h=!1,d=null,{ruleIndexes:u}=t,{udtIndexes:p}=t;for(97===e?(u=t.ruleAlphaIndexes,p=t.udtAlphaIndexes):116===e&&(u=t.ruleTypeIndexes,p=t.udtAlphaIndexes),r=0;r<t.ruleCount;r+=1){for(c=`${u[r]}:${t.typeToString((d=t.ruleDeps[u[r]]).recursiveType)}:`,t.isMutuallyRecursive&&(c+=(d.groupNumber>-1?d.groupNumber:"-")+":"),c+=" ",l+=`${c+t.rules[u[r]].name}
`,h=!0,s=0,i=l.length,l+=c,n=0;n<t.ruleCount;n+=1)d.refersTo[u[n]]&&(h?(h=!1,l+="=> "+t.ruleDeps[u[n]].rule.name):l+=`, ${t.ruleDeps[u[n]].rule.name}`,s+=1),l.length-i>100&&n!==o&&(l+=`
${c}=> `,i=l.length);if(t.udtCount)for(n=0;n<t.udtCount;n+=1)d.refersToUdt[p[n]]&&(h?(h=!1,l+="=> "+t.udts[p[n]].name):l+=`, ${t.udts[p[n]].name}`,s+=1),l.length-i>100&&n!==a&&(l+=`
${c}=> `,i=l.length);for(0===s&&(l+="=> <none>\n"),!1===h&&(l+="\n"),h=!0,s=0,i=l.length,l+=c,n=0;n<t.ruleCount;n+=1)d.referencedBy[u[n]]&&(h?(h=!1,l+="<= "+t.ruleDeps[u[n]].rule.name):l+=`, ${t.ruleDeps[u[n]].rule.name}`,s+=1),l.length-i>100&&n!==o&&(l+=`
${c}=> `,i=l.length);0===s&&(l+="<= <none>\n"),!1===h&&(l+="\n"),l+="\n"}return l},o=(e="index")=>{let r="RULE DEPENDENCIES(index:type:[group number:])\n";return r+="=> refers to rule names\n<= referenced by rule names\n",t.dependenciesComplete&&(97===e.charCodeAt(0)?r+="alphabetical by rule name\n"+i(97):116===e.charCodeAt(0)?r+="ordered by rule type\n"+i(116):r+="ordered by rule index\n"+i(null)),r};return{ruleDependencies:s,showRuleDependencies:o}})()},33610:function(e){e.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){return";\n; ABNF for JavaScript APG 2.0 SABNF\n; RFC 5234 with some restrictions and additions.\n; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation\n;  - accepts %s\"string\" as a case-sensitive string\n;  - accepts %i\"string\" as a case-insensitive string\n;  - accepts \"string\" as a case-insensitive string\n;\n; Some restrictions:\n;   1. Rules must begin at first character of each line.\n;      Indentations on first rule and rules thereafter are not allowed.\n;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.\n;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.\n;      However, a working parser cannot be generated from them.\n;\n; Super set (SABNF) additions:\n;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.\n;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found\n;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found\n;      e.g. &%d13 or &rule or !(A / B)\n;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.\n;      'name' is alpha followed by alpha/num/hyphen just like a rule name.\n;      u_name may be used as an element but no rule definition is given.\n;      e.g. rule = A / u_myUdt\n;           A = \"a\"\n;      would be a valid grammar.\n;   3. Case-sensitive, single-quoted strings are accepted.\n;      e.g. 'abc' would be equivalent to %d97.98.99\n;      (kept for backward compatibility, but superseded by %s\"abc\")  \n; New 12/26/2015\n;   4. Look-behind operators are accepted as element prefixes.\n;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found\n;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found\n;      e.g. &&%d13 or &&rule or !!(A / B)\n;   5. Back reference operators, i.e. \\rulename, are accepted.\n;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts\n;      to match is a phrase previously matched by the rule 'rulename'.\n;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.\n;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.\n;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.\n;      Back reference modifiers can be used to specify case and mode.\n;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA\n;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.\n;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.\n;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. \n;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.\n;      Returns EMPTY or NOMATCH. Never consumes any characters.\n;   8. String end anchor, AEN(%$) matches the end of the input string location.\n;      Returns EMPTY or NOMATCH. Never consumes any characters.\n;\nFile            = *(BlankLine / Rule / RuleError)\nBlankLine       = *(%d32/%d9) [comment] LineEnd\nRule            = RuleLookup owsp Alternation ((owsp LineEnd)\n                / (LineEndError LineEnd))\nRuleLookup      = RuleNameTest owsp DefinedAsTest\nRuleNameTest    = RuleName/RuleNameError\nRuleName        = alphanum\nRuleNameError   = 1*(%d33-60/%d62-126)\nDefinedAsTest   = DefinedAs / DefinedAsError\nDefinedAsError  = 1*2%d33-126\nDefinedAs       = IncAlt / Defined\nDefined         = %d61\nIncAlt          = %d61.47\nRuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd\nLineEndError    = 1*(%d32-126 / %d9  / LineContinue)\nAlternation     = Concatenation *(owsp AltOp Concatenation)\nConcatenation   = Repetition *(CatOp Repetition)\nRepetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)\nModifier        = (Predicate [RepOp])\n                / RepOp\nPredicate       = BkaOp\n                / BknOp\n                / AndOp\n                / NotOp\nBasicElement    = UdtOp\n                / RnmOp\n                / TrgOp\n                / TbsOp\n                / TlsOp\n                / ClsOp\n                / BkrOp\n                / AbgOp\n                / AenOp\n                / ProsVal\nBasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)\nGroup           = GroupOpen  Alternation (GroupClose / GroupError)\nGroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr\nGroupOpen       = %d40 owsp\nGroupClose      = owsp %d41\nOption          = OptionOpen Alternation (OptionClose / OptionError)\nOptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr\nOptionOpen      = %d91 owsp\nOptionClose     = owsp %d93\nRnmOp           = alphanum\nBkrOp           = %d92 [bkrModifier] bkr-name\nbkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])\ncs              = '%s'\nci              = '%i'\num              = '%u'\npm              = '%p'\nbkr-name        = uname / ename / rname\nrname           = alphanum\nuname           = %d117.95 alphanum\nename           = %d101.95 alphanum\nUdtOp           = udt-empty\n                / udt-non-empty\nudt-non-empty   = %d117.95 alphanum\nudt-empty       = %d101.95 alphanum\nRepOp           = (rep-min StarOp rep-max)\n                / (rep-min StarOp)\n                / (StarOp rep-max)\n                / StarOp\n                / rep-min-max\nAltOp           = %d47 owsp\nCatOp           = wsp\nStarOp          = %d42\nAndOp           = %d38\nNotOp           = %d33\nBkaOp           = %d38.38\nBknOp           = %d33.33\nAbgOp           = %d37.94\nAenOp           = %d37.36\nTrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))\nTbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))\nTlsOp           = TlsCase TlsOpen TlsString TlsClose\nTlsCase         = [\"%i\" / \"%s\"]\nTlsOpen         = %d34\nTlsClose        = %d34\nTlsString       = *(%d32-33/%d35-126/StringTab)\nStringTab       = %d9\nClsOp           = ClsOpen ClsString ClsClose\nClsOpen         = %d39\nClsClose        = %d39\nClsString       = *(%d32-38/%d40-126/StringTab)\nProsVal         = ProsValOpen ProsValString ProsValClose\nProsValOpen     = %d60\nProsValString   = *(%d32-61/%d63-126/StringTab)\nProsValClose    = %d62\nrep-min         = rep-num\nrep-min-max     = rep-num\nrep-max         = rep-num\nrep-num         = 1*(%d48-57)\ndString         = dnum\nxString         = xnum\nbString         = bnum\nDec             = (%d68/%d100)\nHex             = (%d88/%d120)\nBin             = (%d66/%d98)\ndmin            = dnum\ndmax            = dnum\nbmin            = bnum\nbmax            = bnum\nxmin            = xnum\nxmax            = xnum\ndnum            = 1*(%d48-57)\nbnum            = 1*%d48-49\nxnum            = 1*(%d48-57 / %d65-70 / %d97-102)\n;\n; Basics\nalphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)\nowsp            = *space\nwsp             = 1*space\nspace           = %d32\n                / %d9\n                / comment\n                / LineContinue\ncomment         = %d59 *(%d32-126 / %d9)\nLineEnd         = %d13.10\n                / %d10\n                / %d13\nLineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)\n"}}},73479:function(e,t,r){let n=r(58276),s=r(8544),i=[];i.line=function(e,t,r,s,i){return e===n.SEM_PRE?(i.endLength=0,i.textLength=0,i.invalidCount=0):i.lines.push({lineNo:i.lines.length,beginChar:r,length:s,textLength:i.textLength,endType:i.endType,invalidChars:i.invalidCount}),n.SEM_OK},i["line-text"]=function(e,t,r,s,i){return e===n.SEM_PRE&&(i.textLength=s),n.SEM_OK},i["last-line"]=function(e,t,r,s,i){return e===n.SEM_PRE?(i.endLength=0,i.textLength=0,i.invalidCount=0):i.strict?(i.lines.push({lineNo:i.lines.length,beginChar:r,length:s,textLength:s,endType:"none",invalidChars:i.invalidCount}),i.errors.push({line:i.lineNo,char:r+s,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(t.push(10),i.lines.push({lineNo:i.lines.length,beginChar:r,length:s+1,textLength:s,endType:"LF",invalidChars:i.invalidCount})),n.SEM_OK},i.invalid=function(e,t,r,i,o){return e===n.SEM_PRE&&o.errors.push({line:o.lineNo,char:r,msg:`invalid character found '\\x${s.charToHex(t[r])}'`}),n.SEM_OK},i.end=function(e,t,r,s,i){return e===n.SEM_POST&&(i.lineNo+=1),n.SEM_OK},i.lf=function(e,t,r,s,i){return e===n.SEM_PRE&&(i.endType="LF",i.strict&&i.errors.push({line:i.lineNo,char:r,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK},i.cr=function(e,t,r,s,i){return e===n.SEM_PRE&&(i.endType="CR",i.strict&&i.errors.push({line:i.lineNo,char:r,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK},i.crlf=function(e,t,r,s,i){return e===n.SEM_PRE&&(i.endType="CRLF"),n.SEM_OK},t.callbacks=i},66410:function(e){e.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){return"file = *line [last-line]\nline = line-text end\nline-text = *(valid/invalid)\nlast-line = 1*(valid/invalid)\nvalid = %d32-126 / %d9\ninvalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff\nend = CRLF / LF / CR\nCRLF = %d13.10\nLF = %d10\nCR = %d13\n"}}},1789:function(e,t,r){e.exports=function(e,t,n,s){let i=r(28737),o=new(r(66410)),{callbacks:a}=r(73479),l=[],c=new i.parser;if(c.ast=new i.ast,c.ast.callbacks=a,s){if("traceObject"!==s.traceObject)throw TypeError("scanner.js: trace argument is not a trace object");c.trace=s}let h=c.parse(o,"file",e);if(!0!==h.success){t.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}return c.ast.translate({lines:l,lineNo:0,errors:t,strict:!!n}),l}},11832:function(e,t,r){e.exports=function(){let e=r(28737),t=e.ids,n=function(){this.names=[],this.add=function(e){let t=-1,r=this.get(e);return -1===r&&(t={name:e,lower:e.toLowerCase(),index:this.names.length},this.names.push(t)),t},this.get=function(e){let t=-1,r=e.toLowerCase();for(let e=0;e<this.names.length;e+=1)if(this.names[e].lower===r){t=this.names[e];break}return t}},s=function(e,t,r){let n=0;for(let s=t;s<t+r;s+=1)n=10*n+e[s]-48;return n},i=function(e,t,r){let n=0;for(let s=t;s<t+r;s+=1)n=2*n+e[s]-48;return n},o=function(e,t,r){let n=0;for(let s=t;s<t+r;s+=1){let t=e[s];if(t>=48&&t<=57)t-=48;else if(t>=65&&t<=70)t-=55;else if(t>=97&&t<=102)t-=87;else throw Error("hexnum out of range");n=16*n+t}return n};this.callbacks=[],this.callbacks.abgop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.ABG}),o},this.callbacks.aenop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.AEN}),o},this.callbacks.alternation=function(e,r,n,s,i){let o=t.SEM_OK;if(e===t.SEM_PRE)for(;;){if(null===i.definedas){o=t.SEM_SKIP;break}if(null===i.topStack){if("="===i.definedas){i.topStack={alt:{type:t.ALT,children:[]},cat:null},i.altStack.push(i.topStack),i.opcodes.push(i.topStack.alt);break}i.topStack={alt:i.opcodes[0],cat:null},i.altStack.push(i.topStack);break}i.topStack={alt:{type:t.ALT,children:[]},cat:null},i.altStack.push(i.topStack),i.opcodes.push(i.topStack.alt);break}else e===t.SEM_POST&&(i.altStack.pop(),i.altStack.length>0?i.topStack=i.altStack[i.altStack.length-1]:i.topStack=null);return o},this.callbacks.andop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.AND}),o},this.callbacks.bmax=function(e,r,n,s,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.max=i(r,n,s)),a},this.callbacks.bmin=function(e,r,n,s,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.min=i(r,n,s)),a},this.callbacks.bkaop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.BKA}),o},this.callbacks.bknop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.BKN}),o},this.callbacks.bkrop=function(r,n,s,i,o){let a=t.SEM_OK;return r===t.SEM_PRE?(o.ci=!0,o.cs=!1,o.um=!0,o.pm=!1):r===t.SEM_POST&&o.opcodes.push({type:t.BKR,bkrCase:!0===o.cs?t.BKR_MODE_CS:t.BKR_MODE_CI,bkrMode:!0===o.pm?t.BKR_MODE_PM:t.BKR_MODE_UM,index:{phraseIndex:o.bkrname.phraseIndex,name:e.utils.charsToString(n,o.bkrname.phraseIndex,o.bkrname.phraseLength)}}),a},this.callbacks["bkr-name"]=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.bkrname={phraseIndex:n,phraseLength:s}),o},this.callbacks.bstring=function(e,r,n,s,o){let a=t.SEM_OK;return e===t.SEM_POST&&o.tbsstr.push(i(r,n,s)),a},this.callbacks.clsop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(s<=2?i.opcodes.push({type:t.TLS,string:[]}):i.opcodes.push({type:t.TBS,string:r.slice(n+1,n+s-1)})),o},this.callbacks.ci=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.ci=!0),o},this.callbacks.cs=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.cs=!0),o},this.callbacks.um=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.um=!0),o},this.callbacks.pm=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.pm=!0),o},this.callbacks.concatenation=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE?(i.topStack.alt.children.push(i.opcodes.length),i.topStack.cat={type:t.CAT,children:[]},i.opcodes.push(i.topStack.cat)):e===t.SEM_POST&&(i.topStack.cat=null),o},this.callbacks.defined=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.definedas="="),o},this.callbacks.dmax=function(e,r,n,i,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.max=s(r,n,i)),a},this.callbacks.dmin=function(e,r,n,i,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.min=s(r,n,i)),a},this.callbacks.dstring=function(e,r,n,i,o){let a=t.SEM_OK;return e===t.SEM_POST&&o.tbsstr.push(s(r,n,i)),a},this.callbacks.file=function(e,r,s,i,o){let a=t.SEM_OK;if(e===t.SEM_PRE)o.ruleNames=new n,o.udtNames=new n,o.rules=[],o.udts=[],o.rulesLineMap=[],o.opcodes=[],o.altStack=[],o.topStack=null,o.topRule=null;else if(e===t.SEM_POST){let e;o.rules.forEach(r=>{r.isBkr=!1,r.opcodes.forEach(r=>{r.type===t.RNM&&(-1===(e=o.ruleNames.get(r.index.name))?(o.errors.push({line:o.findLine(o.lines,r.index.phraseIndex,o.charsLength),char:r.index.phraseIndex,msg:`Rule name '${r.index.name}' used but not defined.`}),r.index=-1):r.index=e.index)})}),o.udts.forEach(e=>{e.isBkr=!1}),o.rules.forEach(r=>{r.opcodes.forEach(n=>{n.type===t.BKR&&(r.hasBkr=!0,-1!==(e=o.ruleNames.get(n.index.name))?(o.rules[e.index].isBkr=!0,n.index=e.index):-1!==(e=o.udtNames.get(n.index.name))?(o.udts[e.index].isBkr=!0,n.index=o.rules.length+e.index):(o.errors.push({line:o.findLine(o.lines,n.index.phraseIndex,o.charsLength),char:n.index.phraseIndex,msg:`Back reference name '${n.index.name}' refers to undefined rule or unamed UDT.`}),n.index=-1))})})}return a},this.callbacks.incalt=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&(i.definedas="=/"),o},this.callbacks.notop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.NOT}),o},this.callbacks.optionopen=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&i.opcodes.push({type:t.REP,min:0,max:1,char:n}),o},this.callbacks["rep-max"]=function(e,r,n,i,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.max=s(r,n,i)),a},this.callbacks["rep-min"]=function(e,r,n,i,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.min=s(r,n,i)),a},this.callbacks["rep-min-max"]=function(e,r,n,i,o){let a=t.SEM_OK;return e===t.SEM_POST&&(o.max=s(r,n,i),o.min=o.max),a},this.callbacks.repetition=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE&&i.topStack.cat.children.push(i.opcodes.length),o},this.callbacks.repop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE?(i.min=0,i.max=1/0,i.topRep={type:t.REP,min:0,max:1/0},i.opcodes.push(i.topRep)):e===t.SEM_POST&&(i.min>i.max&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:`repetition min cannot be greater than max: min: ${i.min}: max: ${i.max}`}),i.topRep.min=i.min,i.topRep.max=i.max),o},this.callbacks.rnmop=function(r,n,s,i,o){let a=t.SEM_OK;return r===t.SEM_POST&&o.opcodes.push({type:t.RNM,index:{phraseIndex:s,name:e.utils.charsToString(n,s,i)}}),a},this.callbacks.rule=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE&&(i.altStack.length=0,i.topStack=null,i.rulesLineMap.push({line:i.findLine(i.lines,n,i.charsLength),char:n})),o},this.callbacks.rulelookup=function(e,r,n,s,i){let o=t.SEM_OK;if(e===t.SEM_PRE)i.ruleName="",i.definedas="";else if(e===t.SEM_POST){let e;"="===i.definedas?-1===(e=i.ruleNames.add(i.ruleName))?(i.definedas=null,i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:`Rule name '${i.ruleName}' previously defined.`})):(i.topRule={name:e.name,lower:e.lower,opcodes:[],index:e.index},i.rules.push(i.topRule),i.opcodes=i.topRule.opcodes):-1===(e=i.ruleNames.get(i.ruleName))?(i.definedas=null,i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:`Rule name '${i.ruleName}' for incremental alternate not previously defined.`})):(i.topRule=i.rules[e.index],i.opcodes=i.topRule.opcodes)}return o},this.callbacks.rulename=function(r,n,s,i,o){let a=t.SEM_OK;return r===t.SEM_PRE&&(o.ruleName=e.utils.charsToString(n,s,i)),a},this.callbacks.tbsop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE?i.tbsstr=[]:e===t.SEM_POST&&i.opcodes.push({type:t.TBS,string:i.tbsstr}),o},this.callbacks.tlscase=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_POST&&s>0&&(83===r[n+1]||115===r[n+1])&&(i.tlscase=!1),o},this.callbacks.tlsstring=function(e,r,n,s,i){let o=t.SEM_OK;if(e===t.SEM_POST){if(i.tlscase){let e=r.slice(n,n+s);for(let t=0;t<e.length;t+=1)e[t]>=65&&e[t]<=90&&(e[t]+=32);i.opcodes.push({type:t.TLS,string:e})}else i.opcodes.push({type:t.TBS,string:r.slice(n,n+s)})}return o},this.callbacks.tlsop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE&&(i.tlscase=!0),o},this.callbacks.trgop=function(e,r,n,s,i){let o=t.SEM_OK;return e===t.SEM_PRE?(i.min=0,i.max=0):e===t.SEM_POST&&(i.min>i.max&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${i.min}: max: ${i.max}`}),i.opcodes.push({type:t.TRG,min:i.min,max:i.max})),o},this.callbacks["udt-empty"]=function(r,n,s,i,o){let a=t.SEM_OK;if(r===t.SEM_POST){let r=e.utils.charsToString(n,s,i),a=o.udtNames.add(r);if(-1===a){if(-1===(a=o.udtNames.get(r)))throw Error("semUdtEmpty: name look up error")}else o.udts.push({name:a.name,lower:a.lower,index:a.index,empty:!0});o.opcodes.push({type:t.UDT,empty:!0,index:a.index})}return a},this.callbacks["udt-non-empty"]=function(r,n,s,i,o){let a=t.SEM_OK;if(r===t.SEM_POST){let r=e.utils.charsToString(n,s,i),a=o.udtNames.add(r);if(-1===a){if(-1===(a=o.udtNames.get(r)))throw Error("semUdtNonEmpty: name look up error")}else o.udts.push({name:a.name,lower:a.lower,index:a.index,empty:!1});o.opcodes.push({type:t.UDT,empty:!1,index:a.index,syntax:null,semantic:null})}return a},this.callbacks.xmax=function(e,r,n,s,i){let a=t.SEM_OK;return e===t.SEM_POST&&(i.max=o(r,n,s)),a},this.callbacks.xmin=function(e,r,n,s,i){let a=t.SEM_OK;return e===t.SEM_POST&&(i.min=o(r,n,s)),a},this.callbacks.xstring=function(e,r,n,s,i){let a=t.SEM_OK;return e===t.SEM_POST&&i.tbsstr.push(o(r,n,s)),a}}},2595:function(e){e.exports=function(){let e="show-rules.js";return function(t=[],r=[],n="index"){let s;let i="showRules",o=[],a=[],l=[],c=[],h=t.length,d=r.length,u="RULE/UDT NAMES";if(!(Array.isArray(t)&&t.length))throw Error(`${e}:${i}: rules arg must be array with length > 0`);if(!Array.isArray(r))throw Error(`${e}:${i}: udts arg must be array`);for(s=0;s<h;s+=1)l.push(s);if((o=l.slice(0)).sort(function(e,r){return t[e].lower<t[r].lower?-1:t[e].lower>t[r].lower?1:0}),d){for(s=0;s<d;s+=1)c.push(s);(a=c.slice(0)).sort(function(e,t){return r[e].lower<r[t].lower?-1:r[e].lower>r[t].lower?1:0})}if(97===n.charCodeAt(0)){for(u+=" - alphabetical by rule/UDT name\n",s=0;s<h;s+=1)u+=`${s}: ${o[s]}: ${t[o[s]].name}
`;if(d)for(s=0;s<d;s+=1)u+=`${s}: ${a[s]}: ${r[a[s]].name}
`}else{for(u+=" - ordered by rule/UDT index\n",s=0;s<h;s+=1)u+=`${s}: ${t[s].name}
`;if(d)for(s=0;s<d;s+=1)u+=`${s}: ${r[s].name}
`}return u}}()},74216:function(e,t,r){e.exports=function(){let e;let t="syntax-callbacks.js: ",n=r(28737),s=n.ids;this.callbacks=[],this.callbacks.andop=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.strict&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.basicelementerr=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:!1===e.basicError&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Unrecognized SABNF element."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.clsclose=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:break;case s.NOMATCH:o.errors.push({line:o.findLine(o.lines,e.clsOpen),char:e.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),e.clsOpen=null,e.basicError=!0;break;case s.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,e.clsOpen),char:e.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),e.clsOpen=null;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.clsopen=function(r,n,i){switch(r.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:e.clsOpen=i;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.clsstring=function(e,r,n,i){switch(e.state){case s.ACTIVE:i.stringTabChar=!1;break;case s.EMPTY:case s.NOMATCH:break;case s.MATCH:!1!==i.stringTabChar&&i.errors.push({line:i.findLine(i.lines,i.stringTabChar),char:i.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.definedaserror=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Expected '=' or '=/'. Not found."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.file=function(e,r,n,i){switch(e.state){case s.ACTIVE:i.altStack=[],i.repCount=0;break;case s.EMPTY:i.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case s.MATCH:0===i.ruleCount&&i.errors.push({line:0,char:0,msg:"no rules defined"});break;case s.NOMATCH:throw Error(`${t}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.groupclose=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:break;case s.NOMATCH:o.errors.push({line:o.findLine(o.lines,e.groupOpen),char:e.groupOpen,msg:'Group "(...)" opened but not closed.'}),(e=o.altStack.pop()).groupError=!0;break;case s.MATCH:e=o.altStack.pop();break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.groupopen=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:e={groupOpen:i,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},o.altStack.push(e);break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.lineenderror=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Unrecognized grammar element or characters."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.lineend=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:if(1===e.phraseLength&&i.strict){let e=13===r[n]?"CR":"LF";i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:`Line end '${e}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.notop=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.strict&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.optionclose=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:break;case s.NOMATCH:o.errors.push({line:o.findLine(o.lines,e.optionOpen),char:e.optionOpen,msg:'Option "[...]" opened but not closed.'}),(e=o.altStack.pop()).optionError=!0;break;case s.MATCH:e=o.altStack.pop();break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.optionopen=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:e={groupOpen:null,groupError:!1,optionOpen:i,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},o.altStack.push(e);break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.prosvalclose=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:break;case s.NOMATCH:o.errors.push({line:o.findLine(o.lines,e.prosValOpen),char:e.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),e.basicError=!0,e.prosValOpen=null;break;case s.MATCH:o.errors.push({line:o.findLine(o.lines,e.prosValOpen),char:e.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),e.prosValOpen=null;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.prosvalopen=function(r,n,i){switch(r.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:e.prosValOpen=i;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.prosvalstring=function(e,r,n,i){switch(e.state){case s.ACTIVE:i.stringTabChar=!1;break;case s.EMPTY:case s.NOMATCH:break;case s.MATCH:!1!==i.stringTabChar&&i.errors.push({line:i.findLine(i.lines,i.stringTabChar),char:i.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.repetition=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:break;case s.NOMATCH:case s.MATCH:i.repCount+=1;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.rule=function(r,n,i,o){switch(r.state){case s.ACTIVE:o.altStack.length=0,e={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},o.altStack.push(e);break;case s.EMPTY:throw Error(`${t}synRule: EMPTY: rule cannot be empty`);case s.NOMATCH:break;case s.MATCH:o.ruleCount+=1;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.ruleerror=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.rulenameerror=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.stringtab=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.stringTabChar=n;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.tlsclose=function(r,n,i,o){switch(r.state){case s.ACTIVE:case s.EMPTY:break;case s.NOMATCH:o.errors.push({line:o.findLine(o.lines,e.tlsOpen),char:e.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),e.basicError=!0,e.tlsOpen=null;break;case s.MATCH:e.tlsOpen=null;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.tlsopen=function(r,n,i){switch(r.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:e.tlsOpen=i;break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.tlsstring=function(e,r,n,i){switch(e.state){case s.ACTIVE:i.stringTabChar=!1;break;case s.EMPTY:case s.NOMATCH:break;case s.MATCH:!1!==i.stringTabChar&&i.errors.push({line:i.findLine(i.lines,i.stringTabChar),char:i.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.udtop=function(e,r,i,o){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:if(o.strict){let t=n.utils.charsToString(r,i,e.phraseLength);o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:`UDT operator found(${t}) - strict ABNF specified.`})}break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.bkaop=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.strict&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.bknop=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.strict&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.bkrop=function(e,r,i,o){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:if(o.strict){let t=n.utils.charsToString(r,i,e.phraseLength);o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:`Back reference operator(${t}) found - strict ABNF specified.`})}break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.abgop=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.strict&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw Error(`${t}synFile: unrecognized case.`)}},this.callbacks.aenop=function(e,r,n,i){switch(e.state){case s.ACTIVE:case s.EMPTY:case s.NOMATCH:break;case s.MATCH:i.strict&&i.errors.push({line:i.findLine(i.lines,n,i.charsLength),char:n,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw Error(`${t}synFile: unrecognized case.`)}}}},20979:function(e,t,r){var n=r(48764).Buffer;let s=this,i=r(46322),o="UTF8",a="UTF16",l="UTF16BE",c="UTF16LE",h="UTF32",d="UTF32BE",u="UTF32LE",p="UINT7",f="ASCII",g="BINARY",m="UINT8",b="UINT16",y="UINT16LE",E="UINT16BE",T="UINT32",A="UINT32LE",x="UINT32BE",k="ESCAPED",S="STRING",w=function(e){e.type=o;let t=e.data;e.bom=0,t.length>=3&&239===t[0]&&187===t[1]&&191===t[2]&&(e.bom=3)},C=function(e){let t=e.data;switch(e.bom=0,e.type){case a:e.type=l,t.length>=2&&(254===t[0]&&255===t[1]?e.bom=2:255===t[0]&&254===t[1]&&(e.type=c,e.bom=2));break;case l:if(e.type=l,t.length>=2){if(254===t[0]&&255===t[1])e.bom=2;else if(255===t[0]&&254===t[1])throw TypeError(`src type: "${l}" specified but BOM is for "${c}"`)}break;case c:if(e.type=c,t.length>=0){if(254===t[0]&&255===t[1])throw TypeError(`src type: "${c}" specified but BOM is for "${l}"`);255===t[0]&&254===t[1]&&(e.bom=2)}break;default:throw TypeError(`UTF16 BOM: src type "${e.type}" unrecognized`)}},M=function(e){let t=e.data;switch(e.bom=0,e.type){case h:e.type=d,t.length>=4&&(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3]&&(e.bom=4),255===t[0]&&254===t[1]&&0===t[2]&&0===t[3]&&(e.type=u,e.bom=4));break;case d:if(e.type=d,t.length>=4&&(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3]&&(e.bom=4),255===t[0]&&254===t[1]&&0===t[2]&&0===t[3]))throw TypeError(`src type: ${d} specified but BOM is for ${u}"`);break;case u:if(e.type=u,t.length>=4){if(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3])throw TypeError(`src type: "${u}" specified but BOM is for "${d}"`);255===t[0]&&254===t[1]&&0===t[2]&&0===t[3]&&(e.bom=4)}break;default:throw TypeError(`UTF32 BOM: src type "${e.type}" unrecognized`)}},v=function(e,t){if("string"!=typeof e||""===e)throw TypeError(`type: "${e}" not recognized`);let r=function(e){let t={type:"",base64:!1},r=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(e);return r&&(r[2]&&(t.type=r[2].toUpperCase()),r[1]&&(t.base64=!0)),t}(e.toUpperCase());if(r.base64){if(r.type===S)throw TypeError(`type: "${e} "BASE64:" prefix not allowed with type ${S}`);if(n.isBuffer(t))r.data=i.base64.decode(t);else if("string"==typeof t){let e=n.from(t,"ascii");r.data=i.base64.decode(e)}else throw TypeError(`type: "${e} unrecognized data type: typeof(data): ${typeof t}`)}else r.data=t;switch(r.type){case o:w(r);break;case a:case l:case c:C(r);break;case h:case d:case u:M(r);break;case b:r.type=E;break;case T:r.type=x;break;case f:r.type=p;break;case g:r.type=m;break;case p:case m:case y:case E:case A:case x:case S:case k:break;default:throw TypeError(`type: "${e}" not recognized`)}if(r.type===S){if("string"!=typeof r.data)throw TypeError(`type: "${e}" but data is not a string`)}else if(!n.isBuffer(r.data))throw TypeError(`type: "${e}" but data is not a Buffer`);return r},O=function(e,t){if(!Array.isArray(t))throw TypeError(`dst chars: not array: "${typeof t}`);if("string"!=typeof e)throw TypeError(`dst type: not string: "${typeof e}`);let r=function(e){let t,r;let n={crlf:!1,lf:!1,base64:!1,type:""};for(;;){if(r=e,"CRLF:"===(t=e.slice(0,5))){n.crlf=!0,r=e.slice(5);break}"LF:"===(t=e.slice(0,3))&&(n.lf=!0,r=e.slice(3));break}return 1===(t=r.split(":")).length?n.type=t[0]:2===t.length&&"BASE64"===t[1]&&(n.base64=!0,n.type=t[0]),n}(e.toUpperCase());switch(r.type){case o:case l:case c:case d:case u:case p:case m:case y:case E:case A:case x:case k:break;case S:if(r.base64)throw TypeError(`":BASE64" suffix not allowed with type ${S}`);break;case f:r.type=p;break;case g:r.type=m;break;case a:r.type=l;break;case h:r.type=d;break;case b:r.type=E;break;case T:r.type=x;break;default:throw TypeError(`dst type unrecognized: "${e}" : must have form [crlf:|lf:]type[:base64]`)}return r},$=function(e,t){switch(e){case o:return i.utf8.encode(t);case l:return i.utf16be.encode(t);case c:return i.utf16le.encode(t);case d:return i.utf32be.encode(t);case u:return i.utf32le.encode(t);case p:return i.uint7.encode(t);case m:return i.uint8.encode(t);case E:return i.uint16be.encode(t);case y:return i.uint16le.encode(t);case x:return i.uint32be.encode(t);case A:return i.uint32le.encode(t);case S:return i.string.encode(t);case k:return i.escaped.encode(t);default:throw TypeError(`encode type "${e}" not recognized`)}},L=function(e){switch(e.type){case o:return i.utf8.decode(e.data,e.bom);case c:return i.utf16le.decode(e.data,e.bom);case l:return i.utf16be.decode(e.data,e.bom);case d:return i.utf32be.decode(e.data,e.bom);case u:return i.utf32le.decode(e.data,e.bom);case p:return i.uint7.decode(e.data);case m:return i.uint8.decode(e.data);case E:return i.uint16be.decode(e.data);case y:return i.uint16le.decode(e.data);case x:return i.uint32be.decode(e.data);case A:return i.uint32le.decode(e.data);case S:return i.string.decode(e.data);case k:return i.escaped.decode(e.data);default:throw TypeError(`decode type "${e.type}" not recognized`)}};t.decode=function(e,t){let r=v(e,t);return L(r)},t.encode=function(e,t){let r,n;let s=O(e,t);return s.crlf?(r=i.lineEnds.crlf(t),n=$(s.type,r)):s.lf?(r=i.lineEnds.lf(t),n=$(s.type,r)):n=$(s.type,t),s.base64&&(n=i.base64.encode(n)),n},t.convert=function(e,t,r){return s.encode(r,s.decode(e,t))}},46322:function(e,t,r){var n=r(48764).Buffer;let s=this,i=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],o=[];"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(e=>{o.push(e.charCodeAt(0))}),t.utf8={encode(e){let t=[];return e.forEach(e=>{if(e>=0&&e<=127)t.push(e);else if(e<=2047)t.push(192+(e>>6&31)),t.push(128+(63&e));else if(e<55296||e>57343&&e<=65535)t.push(224+(e>>12&15)),t.push(128+(e>>6&63)),t.push(128+(63&e));else if(e>=65536&&e<=1114111){let r=e>>16&31;t.push(240+(r>>2)),t.push(128+((3&r)<<4)+(e>>12&15)),t.push(128+(e>>6&63)),t.push(128+(63&e))}else throw RangeError(`utf8.encode: character out of range: char: ${e}`)}),n.from(t)},decode(e,t){let r,n,s,i,o,a;let l=e.length,c=t?3:0,h=[];for(;c<l;){for(n=e[c],r=4294967295;;){if(n>=0&&n<=127){r=n,a=1;break}if((s=c+1)<l&&n>=194&&n<=223){r=function(e,t){if((192&t)!=128)return 4294967293;let r=((31&e)<<6)+(63&t);return r<128?4294967292:r}(n,e[s]),a=2;break}if((i=c+2)<l&&n>=224&&n<=239){r=function(e,t,r){if((192&r)!=128||(192&t)!=128)return 4294967293;let n=((15&e)<<12)+((63&t)<<6)+(63&r);return n<2048?4294967292:n>=55296&&n<=57343?4294967294:n}(n,e[s],e[i]),a=3;break}(o=c+3)<l&&n>=240&&n<=244&&(r=function(e,t,r,n){if((192&n)!=128||(192&r)!=128||(192&t)!=128)return 4294967293;let s=(((7&e)<<2)+(t>>4&3)<<16)+((15&t)<<12)+((63&r)<<6)+(63&n);return s<65536?4294967292:s>1114111?4294967294:s}(n,e[s],e[i],e[o]),a=4);break}if(r>1114111){let e=`byte[${c}]`;if(4294967295===r)throw RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${e}`);if(4294967293===r)throw RangeError(`utf8.decode: illegal trailing byte found at: ${e}`);if(4294967294===r)throw RangeError(`utf8.decode: code point out of range found at: ${e}`);if(4294967292===r)throw RangeError(`utf8.decode: non-shortest form found at: ${e}`);throw RangeError(`utf8.decode: unrecognized error found at: ${e}`)}h.push(r),c+=a}return h}},t.utf16be={encode(e){let t,r,s;let i=[];for(let n=0;n<e.length;n+=1)if((t=e[n])>=0&&t<=55295||t>=57344&&t<=65535)i.push(t>>8&255),i.push(255&t);else if(t>=65536&&t<=1114111)r=55296+((s=t-65536)>>10),s=56320+(1023&s),i.push(r>>8&255),i.push(255&r),i.push(s>>8&255),i.push(255&s);else throw RangeError(`utf16be.encode: UTF16BE value out of range: char[${n}]: ${t}`);return n.from(i)},decode(e,t){let r,n,s,i,o,a;if(e.length%2>0)throw RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${e.length}`);let l=[],c=e.length,h=t?2:0,d=0;for(;h<c;){for(;;){if((s=h+1)<c){if((o=(e[h]<<8)+e[s])<55296||o>57343){r=o,n=2;break}if((i=h+3)<c&&(a=(e[h+2]<<8)+e[i],o<=56319&&a>=56320&&a<=57343)){r=65536+(o-55296<<10)+(a-56320),n=4;break}}throw RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${h}]`)}l[d++]=r,h+=n}return l}},t.utf16le={encode(e){let t,r,s;let i=[];for(let n=0;n<e.length;n+=1)if((t=e[n])>=0&&t<=55295||t>=57344&&t<=65535)i.push(255&t),i.push(t>>8&255);else if(t>=65536&&t<=1114111)r=55296+((s=t-65536)>>10),s=56320+(1023&s),i.push(255&r),i.push(r>>8&255),i.push(255&s),i.push(s>>8&255);else throw RangeError(`utf16le.encode: UTF16LE value out of range: char[${n}]: ${t}`);return n.from(i)},decode(e,t){let r,n,s,i,o,a;if(e.length%2>0)throw RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${e.length}`);let l=[],c=e.length,h=t?2:0,d=0;for(;h<c;){for(;;){if((s=h+1)<c){if((o=(e[s]<<8)+e[h])<55296||o>57343){r=o,n=2;break}if((i=h+3)<c&&(a=(e[i]<<8)+e[h+2],o<=56319&&a>=56320&&a<=57343)){r=65536+(o-55296<<10)+(a-56320),n=4;break}}throw RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${h}]`)}l[d++]=r,h+=n}return l}},t.utf32be={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{if(e>=55296&&e<=57343||e>1114111)throw RangeError(`utf32be.encode: UTF32BE character code out of range: char[${r/4}]: ${e}`);t[r++]=e>>24&255,t[r++]=e>>16&255,t[r++]=e>>8&255,t[r++]=255&e}),t},decode(e,t){if(e.length%4>0)throw RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${e.length}`);let r=[],n=t?4:0;for(;n<e.length;n+=4){let t=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];if(t>=55296&&t<=57343||t>1114111)throw RangeError(`utf32be.decode: UTF32BE character code out of range: char[${n/4}]: ${t}`);r.push(t)}return r}},t.utf32le={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{if(e>=55296&&e<=57343||e>1114111)throw RangeError(`utf32le.encode: UTF32LE character code out of range: char[${r/4}]: ${e}`);t[r++]=255&e,t[r++]=e>>8&255,t[r++]=e>>16&255,t[r++]=e>>24&255}),t},decode(e,t){if(e.length%4>0)throw RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${e.length}`);let r=[],n=t?4:0;for(;n<e.length;n+=4){let t=(e[n+3]<<24)+(e[n+2]<<16)+(e[n+1]<<8)+e[n];if(t>=55296&&t<=57343||t>1114111)throw RangeError(`utf32le.encode: UTF32LE character code out of range: char[${n/4}]: ${t}`);r.push(t)}return r}},t.uint7={encode(e){let t=n.alloc(e.length);for(let r=0;r<e.length;r+=1){if(e[r]>127)throw RangeError(`uint7.encode: UINT7 character code out of range: char[${r}]: ${e[r]}`);t[r]=e[r]}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=1){if(e[r]>127)throw RangeError(`uint7.decode: UINT7 character code out of range: byte[${r}]: ${e[r]}`);t[r]=e[r]}return t}},t.uint8={encode(e){let t=n.alloc(e.length);for(let r=0;r<e.length;r+=1){if(e[r]>255)throw RangeError(`uint8.encode: UINT8 character code out of range: char[${r}]: ${e[r]}`);t[r]=e[r]}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=1)t[r]=e[r];return t}},t.uint16be={encode(e){let t=n.alloc(2*e.length),r=0;return e.forEach(e=>{if(e>65535)throw RangeError(`uint16be.encode: UINT16BE character code out of range: char[${r/2}]: ${e}`);t[r++]=e>>8&255,t[r++]=255&e}),t},decode(e){if(e.length%2>0)throw RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=2)t.push((e[r]<<8)+e[r+1]);return t}},t.uint16le={encode(e){let t=n.alloc(2*e.length),r=0;return e.forEach(e=>{if(e>65535)throw RangeError(`uint16le.encode: UINT16LE character code out of range: char[${r/2}]: ${e}`);t[r++]=255&e,t[r++]=e>>8&255}),t},decode(e){if(e.length%2>0)throw RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=2)t.push((e[r+1]<<8)+e[r]);return t}},t.uint32be={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{t[r++]=e>>24&255,t[r++]=e>>16&255,t[r++]=e>>8&255,t[r++]=255&e}),t},decode(e){if(e.length%4>0)throw RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=4)t.push((e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3]);return t}},t.uint32le={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{t[r++]=255&e,t[r++]=e>>8&255,t[r++]=e>>16&255,t[r++]=e>>24&255}),t},decode(e){if(e.length%4>0)throw RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=4)t.push((e[r+3]<<24)+(e[r+2]<<16)+(e[r+1]<<8)+e[r]);return t}},t.string={encode:e=>s.utf16le.encode(e).toString("utf16le"),decode:e=>s.utf16le.decode(n.from(e,"utf16le"),0)},t.escaped={encode(e){let t=[];for(let r=0;r<e.length;r+=1){let s=e[r];if(96===s)t.push(s),t.push(s);else if(10===s)t.push(s);else if(s>=32&&s<=126)t.push(s);else{let e="";if(s>=0&&s<=31)e+=`\`x${i[s]}`;else if(s>=127&&s<=255)e+=`\`x${i[s]}`;else if(s>=256&&s<=65535)e+=`\`u${i[s>>8&255]}${i[255&s]}`;else if(s>=65536&&s<=4294967295){e+="`u{";let t=s>>24&255;t>0&&(e+=i[t]),e+=`${i[s>>16&255]+i[s>>8&255]+i[255&s]}}`}else throw Error("escape.encode(char): char > 0xffffffff not allowed");let r=n.from(e);r.forEach(e=>{t.push(e)})}}return n.from(t)},decode(e){let t,r,n;function s(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}let i=[],o=e.length,a=0;for(;a<o;){for(;;){if(n=!0,96!==e[a]){i.push(e[a]),a+=1,n=!1;break}if((t=a+1)>=o)break;if(96===e[t]){i.push(96),a+=2,n=!1;break}if(120===e[t]){if((r=function(e,t,r){let n={char:null,nexti:e+2,error:!0};if(e+1<t&&s(r[e])&&s(r[e+1])){let t=String.fromCodePoint(r[e],r[e+1]);n.char=parseInt(t,16),Number.isNaN(n.char)||(n.error=!1)}return n}(t+1,o,e)).error)break;i.push(r.char),a=r.nexti,n=!1;break}if(117===e[t]){if(123===e[t+1]){if((r=function(e,t,r){let n={char:null,nexti:e+4,error:!0},i="";for(;e<t&&s(r[e]);)i+=String.fromCodePoint(r[e]),e+=1;return n.char=parseInt(i,16),125!==r[e]||Number.isNaN(n.char)||(n.error=!1),n.nexti=e+1,n}(t+2,o,e)).error)break;i.push(r.char),a=r.nexti,n=!1;break}if((r=function(e,t,r){let n={char:null,nexti:e+4,error:!0};if(e+3<t&&s(r[e])&&s(r[e+1])&&s(r[e+2])&&s(r[e+3])){let t=String.fromCodePoint(r[e],r[e+1],r[e+2],r[e+3]);n.char=parseInt(t,16),Number.isNaN(n.char)||(n.error=!1)}return n}(t+1,o,e)).error)break;i.push(r.char),a=r.nexti,n=!1}break}if(n)throw Error(`escaped.decode: ill-formed escape sequence at buf[${a}]`)}return i}},t.lineEnds={crlf(e){let t=[],r=0;for(;r<e.length;)switch(e[r]){case 13:r+1<e.length&&10===e[r+1]?r+=2:r+=1,t.push(13),t.push(10);break;case 10:t.push(13),t.push(10),r+=1;break;default:t.push(e[r]),r+=1}return t.length>0&&10!==t[t.length-1]&&(t.push(13),t.push(10)),t},lf(e){let t=[],r=0;for(;r<e.length;)switch(e[r]){case 13:r+1<e.length&&10===e[r+1]?r+=2:r+=1,t.push(10);break;case 10:t.push(10),r+=1;break;default:t.push(e[r]),r+=1}return t.length>0&&10!==t[t.length-1]&&t.push(10),t}},t.base64={encode(e){let t,r,s;if(0===e.length)return n.alloc(0);let i=e.length%3;i=i>0?3-i:0;let a=(e.length+i)/3,l=n.alloc(4*a);i>0&&(a-=1),t=0,r=0;for(let n=0;n<a;n+=1)s=(e[t++]<<16)+(e[t++]<<8)+e[t++],l[r++]=o[s>>18&63],l[r++]=o[s>>12&63],l[r++]=o[s>>6&63],l[r++]=o[63&s];return 0===i?l:1===i?(s=(e[t++]<<16)+(e[t]<<8),l[r++]=o[s>>18&63],l[r++]=o[s>>12&63],l[r++]=o[s>>6&63],l[r]=o[64],l):2===i?(s=e[t]<<16,l[r++]=o[s>>18&63],l[r++]=o[s>>12&63],l[r++]=o[64],l[r]=o[64],l):void 0},decode(e){let t,r,s;if(0===e.length)return n.alloc(0);let i=function(e){let t=[],r=0;for(let n=0;n<e.length;n+=1){let s=e[n];for(;32!==s&&9!==s&&10!==s&&13!==s;){if(s>=65&&s<=90){t.push(s-65);break}if(s>=97&&s<=122){t.push(s-71);break}if(s>=48&&s<=57){t.push(s+4);break}if(43===s){t.push(62);break}if(47===s){t.push(63);break}if(61===s){t.push(64),r+=1;break}throw RangeError(`base64.decode: invalid character buf[${n}]: ${s}`)}}if(t.length%4>0)throw RangeError(`base64.decode: string length not integral multiple of 4: ${t.length}`);switch(r){case 0:break;case 1:if(64!==t[t.length-1])throw RangeError("base64.decode: one tail character found: not last character");break;case 2:if(64!==t[t.length-1]||64!==t[t.length-2])throw RangeError("base64.decode: two tail characters found: not last characters");break;default:throw RangeError(`base64.decode: more than two tail characters found: ${r}`)}return{tail:r,buf:n.from(t)}}(e),{tail:o}=i,a=i.buf,l=a.length/4,c=n.alloc(3*l-o);o>0&&(l-=1),r=0,t=0;for(let e=0;e<l;e+=1)s=(a[t++]<<18)+(a[t++]<<12)+(a[t++]<<6)+a[t++],c[r++]=s>>16&255,c[r++]=s>>8&255,c[r++]=255&s;return 1===o&&(s=(a[t++]<<18)+(a[t++]<<12)+(a[t]<<6),c[r++]=s>>16&255,c[r]=s>>8&255),2===o&&(s=(a[t++]<<18)+(a[t++]<<12),c[r]=s>>16&255),c},toString(e){if(e.length%4>0)throw RangeError(`base64.toString: input buffer length not multiple of 4: ${e.length}`);let t="",r=0;for(let s=0;s<e.length;s+=4){for(let t=s;t<s+4;t+=1){var n;if(!((n=e[t])>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||43===n||47===n||61===n))throw RangeError(`base64.toString: buf[${t}]: ${e[t]} : not valid base64 character code`)}!function(e,n,s,i){switch(r){case 76:t+=`\r
${e}${n}${s}${i}`,r=4;break;case 75:t+=`${e}\r
${n}${s}${i}`,r=3;break;case 74:t+=`${e+n}\r
${s}${i}`,r=2;break;case 73:t+=`${e+n+s}\r
${i}`,r=1;break;default:t+=e+n+s+i,r+=4}}(String.fromCharCode(e[s]),String.fromCharCode(e[s+1]),String.fromCharCode(e[s+2]),String.fromCharCode(e[s+3]))}return t}}},90580:function(e,t,r){e.exports=function(){let e=r(58276),t=r(8544),n=this,s=null,i=null,o=null,a=0,l=[],c=[],h=[],d=[];function u(e){let t="";for(let r=0;r<e;r+=1)t+=" ";return t}this.callbacks=[],this.astObject="astObject",this.init=function(e,t,r){let u;h.length=0,d.length=0,l.length=0,a=0,s=e,i=t,o=r;let p=[];for(u=0;u<s.length;u+=1)p.push(s[u].lower);for(u=0;u<i.length;u+=1)p.push(i[u].lower);for(u=0,a=s.length+i.length;u<a;u+=1)l[u]=!1,c[u]=null;for(let e in n.callbacks){let t=e.toLowerCase();if((u=p.indexOf(t))<0)throw Error(`ast.js: init: node '${e}' not a rule or udt name`);"function"==typeof n.callbacks[e]&&(l[u]=!0,c[u]=n.callbacks[e]),!0===n.callbacks[e]&&(l[u]=!0)}},this.ruleDefined=function(e){return!1!==l[e]},this.udtDefined=function(e){return!1!==l[s.length+e]},this.down=function(t,r){let n=d.length;return h.push(n),d.push({name:r,thisIndex:n,thatIndex:null,state:e.SEM_PRE,callbackIndex:t,phraseIndex:null,phraseLength:null,stack:h.length}),n},this.up=function(t,r,n,s){let i=d.length,o=h.pop();return d.push({name:r,thisIndex:i,thatIndex:o,state:e.SEM_POST,callbackIndex:t,phraseIndex:n,phraseLength:s,stack:h.length}),d[o].thatIndex=i,d[o].phraseIndex=n,d[o].phraseLength=s,i},this.translate=function(t){let r,n;for(let s=0;s<d.length;s+=1)r=c[(n=d[s]).callbackIndex],n.state===e.SEM_PRE?null!==r&&r(e.SEM_PRE,o,n.phraseIndex,n.phraseLength,t)===e.SEM_SKIP&&(s=n.thatIndex):null!==r&&r(e.SEM_POST,o,n.phraseIndex,n.phraseLength,t)},this.setLength=function(e){d.length=e,e>0?h.length=d[e-1].stack:h.length=0},this.getLength=function(){return d.length},this.toXml=function(r){let n=t.charsToDec,s="decimal integer character codes";if("string"==typeof mode&&r.length>=3){let e=r.slice(0,3).toLowerCase();"asc"===e?(n=t.charsToAscii,s="ASCII for printing characters, hex for non-printing"):"hex"===e?(n=t.charsToHex,s="hexidecimal integer character codes"):"uni"===e&&(n=t.charsToUnicode,s="Unicode UTF-32 integer character codes")}let i="",a=0;return i+=`<?xml version="1.0" encoding="utf-8"?>
<root nodes="${d.length/2}" characters="${o.length}">
<!-- input string, ${s} -->
`+u(a+2)+n(o)+"\n",d.forEach(t=>{t.state===e.SEM_PRE?(a+=1,i+=u(a)+`<node name="${t.name}" index="${t.phraseIndex}" length="${t.phraseLength}">
`+u(a+2)+n(o,t.phraseIndex,t.phraseLength)+"\n"):(i+=u(a)+`</node><!-- name="${t.name}" -->
`,a-=1)}),i+="</root>\n"},this.phrases=function(){let t,r;let n={};for(t=0;t<d.length;t+=1)(r=d[t]).state===e.SEM_PRE&&(Array.isArray(n[r.name])||(n[r.name]=[]),n[r.name].push({index:r.phraseIndex,length:r.phraseLength}));return n}}},42761:function(e){e.exports=function(){let e=-1,t=0;this.init=function(r){if("number"!=typeof r||r<=0)throw Error("circular-buffer.js: init: circular buffer size must an integer > 0");t=Math.ceil(r),e=-1},this.increment=function(){return((e+=1)+t)%t},this.maxSize=function(){return t},this.items=function(){return e+1},this.getListIndex=function(r){return -1===e||r<0||r>e||e-r>=t?-1:(r+t)%t},this.forEach=function(r){if(-1!==e){if(e<t){for(let t=0;t<=e;t+=1)r(t,t);return}for(let n=e-t+1;n<=e;n+=1){let e=(n+t)%t;r(e,n)}}}}},91593:function(e){e.exports=function(){return"/* This file automatically generated by jsonToless() and LESS. */\n.apg-mono {\n  font-family: monospace;\n}\n.apg-active {\n  font-weight: bold;\n  color: #000000;\n}\n.apg-match {\n  font-weight: bold;\n  color: #264BFF;\n}\n.apg-empty {\n  font-weight: bold;\n  color: #0fbd0f;\n}\n.apg-nomatch {\n  font-weight: bold;\n  color: #FF4000;\n}\n.apg-lh-match {\n  font-weight: bold;\n  color: #1A97BA;\n}\n.apg-lb-match {\n  font-weight: bold;\n  color: #5F1687;\n}\n.apg-remainder {\n  font-weight: bold;\n  color: #999999;\n}\n.apg-ctrl-char {\n  font-weight: bolder;\n  font-style: italic;\n  font-size: 0.6em;\n}\n.apg-line-end {\n  font-weight: bold;\n  color: #000000;\n}\n.apg-error {\n  font-weight: bold;\n  color: #FF4000;\n}\n.apg-phrase {\n  color: #000000;\n  background-color: #8caae6;\n}\n.apg-empty-phrase {\n  color: #0fbd0f;\n}\ntable.apg-state {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: left;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-state th,\ntable.apg-state td {\n  text-align: left;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-state th:nth-last-child(2),\ntable.apg-state td:nth-last-child(2) {\n  text-align: right;\n}\ntable.apg-state caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-stats {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-stats th,\ntable.apg-stats td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-stats caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-trace {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-trace caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-trace th,\ntable.apg-trace td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-trace th:last-child,\ntable.apg-trace th:nth-last-child(2),\ntable.apg-trace td:last-child,\ntable.apg-trace td:nth-last-child(2) {\n  text-align: left;\n}\ntable.apg-grammar {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-grammar caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-grammar th,\ntable.apg-grammar td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-grammar th:last-child,\ntable.apg-grammar td:last-child {\n  text-align: left;\n}\ntable.apg-rules {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-rules caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-rules th,\ntable.apg-rules td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-rules a {\n  color: #003399 !important;\n}\ntable.apg-rules a:hover {\n  color: #8caae6 !important;\n}\ntable.apg-attrs {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-attrs caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-attrs th,\ntable.apg-attrs td {\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-attrs th:nth-child(1),\ntable.apg-attrs th:nth-child(2),\ntable.apg-attrs th:nth-child(3) {\n  text-align: right;\n}\ntable.apg-attrs td:nth-child(1),\ntable.apg-attrs td:nth-child(2),\ntable.apg-attrs td:nth-child(3) {\n  text-align: right;\n}\ntable.apg-attrs a {\n  color: #003399 !important;\n}\ntable.apg-attrs a:hover {\n  color: #8caae6 !important;\n}\n"}},58276:function(e){e.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}},28737:function(e,t,r){e.exports={ast:r(90580),circular:r(42761),ids:r(58276),parser:r(48629),stats:r(35403),trace:r(99290),utils:r(8544),emitcss:r(91593),style:r(93932)}},48629:function(e,t,r){e.exports=function(){let e,t,n,s,i;let o=r(58276),a=r(8544),l="parser.js: ",c=this;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let h=null,d=null,u=0,p=0,f=0,g=null,m=null,b=null,y=null,E=null,T=0,A=1/0,x=1/0,k=function(t,r,n){let i=`${l}evaluateRule(): `;if(t>=b.length)throw Error(`${i}rule index: ${t} out of range`);if(r>=s)throw Error(`${i}phrase index: ${r} out of range`);let{length:a}=h;h.push({type:o.RNM,index:t}),e(a,r,n),h.pop()},S=function(t,r,n){let i=`${l}evaluateUdt(): `;if(t>=y.length)throw Error(`${i}udt index: ${t} out of range`);if(r>=s)throw Error(`${i}phrase index: ${r} out of range`);let{length:a}=h;h.push({type:o.UDT,empty:y[t].empty,index:t}),e(a,r,n),h.pop()},w=function(){u=0,p=0,f=0,T=0,i=[{lookAround:o.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],b=null,y=null,d=null,t=0,n=0,s=0,g=null,m=null,E=null,h=null},C=function(){let e=[],t=function(){let t=e[e.length-1],r={};for(let e in t)r[e]=t[e];return r};this.push=function(){e.push(t())},this.pop=function(t){let r=t;if(r||(r=e.length-1),r<1||r>e.length)throw Error(`${l}backRef.pop(): bad length: ${r}`);return e.length=r,e[e.length-1]},this.length=function(){return e.length},this.savePhrase=function(t,r,n){e[e.length-1][t]={phraseIndex:r,phraseLength:n}},this.getPhrase=function(t){return e[e.length-1][t]},function(){let t={};b.forEach(e=>{e.isBkr&&(t[e.lower]=null)}),y.length>0&&y.forEach(e=>{e.isBkr&&(t[e.lower]=null)}),e.push(t)}()},M=function(){let e=this;this.state=o.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=i[i.length-1],this.uFrame=new C,this.pFrame=new C,this.evaluateRule=k,this.evaluateUdt=S,this.refresh=function(){e.state=o.ACTIVE,e.phraseLength=0,e.lookAround=i[i.length-1]}},v=function(){return i[i.length-1]},O=function(){return i.length>1},$=function(){let e=`${l}initializeAst(): `;for(;;){if(void 0===c.ast){c.ast=null;break}if(null===c.ast)break;if("astObject"!==c.ast.astObject)throw Error(`${e}ast object not recognized`);break}null!==c.ast&&c.ast.init(b,y,d)},L=function(){let e=`${l}initializeTrace(): `;for(;;){if(void 0===c.trace){c.trace=null;break}if(null===c.trace)break;if("traceObject"!==c.trace.traceObject)throw Error(`${e}trace object not recognized`);break}null!==c.trace&&c.trace.init(b,y,d)},N=function(){let e=`${l}initializeStats(): `;for(;;){if(void 0===c.stats){c.stats=null;break}if(null===c.stats)break;if("statsObject"!==c.stats.statsObject)throw Error(`${e}stats object not recognized`);break}null!==c.stats&&c.stats.init(b,y)},B=function(e){let t=`${l}initializeGrammar(): `;if(!e)throw Error(`${t}grammar object undefined`);if("grammarObject"!==e.grammarObject)throw Error(`${t}bad grammar object`);b=e.rules,y=e.udts},R=function(e){let t=`${l}initializeStartRule(): `,r=null;if("number"==typeof e){if(e>=b.length)throw Error(`${t}start rule index too large: max: ${b.length}: index: ${e}`);r=e}else if("string"==typeof e){let n=e.toLowerCase();for(let e=0;e<b.length;e+=1)if(n===b[e].lower){r=b[e].index;break}if(null===r)throw Error(`${t}start rule name '${e}' not recognized`)}else throw Error(`${t}type of start rule '${typeof e}' not recognized`);return r},I=function(e,r,i){let o=`${l}initializeInputChars(): `,c=e,h=r,u=i;if(void 0===c)throw Error(`${o}input string is undefined`);if(null===c)throw Error(`${o}input string is null`);if("string"==typeof c)c=a.stringToChars(c);else if(!Array.isArray(c))throw Error(`${o}input string is not a string or array`);if(c.length>0&&"number"!=typeof c[0])throw Error(`${o}input string not an array of integers`);if("number"!=typeof h)h=0;else if((h=Math.floor(h))<0||h>c.length)throw Error(`${o}input beginning index out of range: ${h}`);if("number"!=typeof u)u=c.length-h;else if((u=Math.floor(u))<0||u>c.length-h)throw Error(`${o}input length out of range: ${u}`);d=c,s=(t=h)+(n=u)},_=function(){let e,t;let r=`${l}initializeCallbacks(): `;for(e=0,g=[],m=[];e<b.length;e+=1)g[e]=null;for(e=0;e<y.length;e+=1)m[e]=null;let n=[];for(e=0;e<b.length;e+=1)n.push(b[e].lower);for(e=0;e<y.length;e+=1)n.push(y[e].lower);for(let s in c.callbacks){if((e=n.indexOf(s.toLowerCase()))<0)throw Error(`${r}syntax callback '${s}' not a rule or udt name`);if((t=c.callbacks[s])||(t=null),"function"==typeof t||null===t)e<b.length?g[e]=t:m[e-b.length]=t;else throw Error(`${r}syntax callback[${s}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(e=0;e<y.length;e+=1)if(null===m[e])throw Error(`${r}all UDT callbacks must be defined. UDT callback[${y[e].lower}] not a function reference`)};this.setMaxTreeDepth=function(e){if("number"!=typeof e||(A=Math.floor(e))<=0)throw Error(`parser: max tree depth must be integer > 0: ${e}`)},this.setMaxNodeHits=function(e){if("number"!=typeof e||(x=Math.floor(e))<=0)throw Error(`parser: max node hits must be integer > 0: ${e}`)};let D=function(r,i,a){let c;let u=`${l}parse(): `;B(r);let g=R(i);_(),L(),N(),$();let m=new M;switch(null!=a&&(E=a),h=[{type:o.RNM,index:g}],e(0,t,m),h=null,m.state){case o.ACTIVE:throw Error(`${u}final state should never be 'ACTIVE'`);case o.NOMATCH:c=!1;break;case o.EMPTY:case o.MATCH:c=m.phraseLength===n;break;default:throw Error("unrecognized state")}return{success:c,state:m.state,length:n,matched:m.phraseLength,maxMatched:T,maxTreeDepth:p,nodeHits:f,inputLength:d.length,subBegin:t,subEnd:s,subLength:n}};this.parseSubstring=function(e,t,r,n,s,i){return w(),I(r,n,s),D(e,t,i)},this.parse=function(e,t,r,n){return w(),I(r,0,r.length),D(e,t,n)};let P=function(t,r,n){let s=h[t];for(let t=0;t<s.children.length&&(e(s.children[t],r,n),n.state===o.NOMATCH);t+=1);},H=function(t,r,n){let s,i,a,l;let d=h[t],u=n.uFrame.length(),p=n.pFrame.length();c.ast&&(i=c.ast.getLength()),s=!0,a=r,l=0;for(let t=0;t<d.children.length;t+=1){if(e(d.children[t],a,n),n.state===o.NOMATCH){s=!1;break}a+=n.phraseLength,l+=n.phraseLength}s?(n.state=0===l?o.EMPTY:o.MATCH,n.phraseLength=l):(n.state=o.NOMATCH,n.phraseLength=0,n.uFrame.pop(u),n.pFrame.pop(p),c.ast&&c.ast.setLength(i))},F=function(t,r,n){let i,a,l,d;let u=h[t];a=r,l=0,d=0;let p=n.uFrame.length(),f=n.pFrame.length();for(c.ast&&(i=c.ast.getLength());!(a>=s)&&(e(t+1,a,n),n.state!==o.NOMATCH&&n.state!==o.EMPTY&&(d+=1,l+=n.phraseLength,a+=n.phraseLength,d!==u.max)););n.state===o.EMPTY?(n.state=0===l?o.EMPTY:o.MATCH,n.phraseLength=l):d>=u.min?(n.state=0===l?o.EMPTY:o.MATCH,n.phraseLength=l):(n.state=o.NOMATCH,n.phraseLength=0,n.uFrame.pop(p),n.pFrame.pop(f),c.ast&&c.ast.setLength(i))},U=function(e,t,r,n){if(t.phraseLength>r){let n=`${l}opRNM(${e.name}): callback function error: `;throw Error(n+=`sysData.phraseLength: ${t.phraseLength} must be <= remaining chars: ${r}`)}switch(t.state){case o.ACTIVE:if(!0!==n)throw Error(`${l}opRNM(${e.name}): callback function return error. ACTIVE state not allowed.`);break;case o.EMPTY:t.phraseLength=0;break;case o.MATCH:0===t.phraseLength&&(t.state=o.EMPTY);break;case o.NOMATCH:t.phraseLength=0;break;default:throw Error(`${l}opRNM(${e.name}): callback function return error. Unrecognized return state: ${t.state}`)}},K=function(t,r,n){let i,a,l,u,p,f;let m=h[t],y=b[m.index],T=g[y.index],A=!O();if(A&&((a=c.ast&&c.ast.ruleDefined(m.index))&&(i=c.ast.getLength(),c.ast.down(m.index,b[m.index].name)),u=n.uFrame.length(),p=n.pFrame.length(),n.uFrame.push(),n.pFrame.push(),f=n.pFrame,n.pFrame=new C),null===T)l=h,h=y.opcodes,e(0,r,n),h=l;else{let t=s-r;n.ruleIndex=y.index,T(n,d,r,E),U(y,n,t,!0),n.state===o.ACTIVE&&(l=h,h=y.opcodes,e(0,r,n),h=l,n.ruleIndex=y.index,T(n,d,r,E),U(y,n,t,!1))}A&&(a&&(n.state===o.NOMATCH?c.ast.setLength(i):c.ast.up(m.index,y.name,r,n.phraseLength)),n.pFrame=f,n.state===o.NOMATCH?(n.uFrame.pop(u),n.pFrame.pop(p)):y.isBkr&&(n.pFrame.savePhrase(y.lower,r,n.phraseLength),n.uFrame.savePhrase(y.lower,r,n.phraseLength)))},G=function(e,t,r){if(t.phraseLength>r){let n=`${l}opUDT(${e.name}): callback function error: `;throw Error(n+=`sysData.phraseLength: ${t.phraseLength} must be <= remaining chars: ${r}`)}switch(t.state){case o.ACTIVE:throw Error(`${l}opUDT(${e.name}): callback function return error. ACTIVE state not allowed.`);case o.EMPTY:if(!1===e.empty)throw Error(`${l}opUDT(${e.name}): callback function return error. May not return EMPTY.`);t.phraseLength=0;break;case o.MATCH:if(0===t.phraseLength){if(!1===e.empty)throw Error(`${l}opUDT(${e.name}): callback function return error. May not return EMPTY.`);t.state=o.EMPTY}break;case o.NOMATCH:t.phraseLength=0;break;default:throw Error(`${l}opUDT(${e.name}): callback function return error. Unrecognized return state: ${t.state}`)}},V=function(e,t,r){let n,i,a,l,u,p;let f=h[e],g=y[f.index];r.UdtIndex=g.index;let T=!O();T&&((a=c.ast&&c.ast.udtDefined(f.index))&&(i=b.length+f.index,n=c.ast.getLength(),c.ast.down(i,g.name)),l=r.uFrame.length(),u=r.pFrame.length(),r.uFrame.push(),r.pFrame.push(),p=r.pFrame,r.pFrame=new C);let A=s-t;m[f.index](r,d,t,E),G(g,r,A),T&&(a&&(r.state===o.NOMATCH?c.ast.setLength(n):c.ast.up(i,g.name,t,r.phraseLength)),r.pFrame=p,r.state===o.NOMATCH?(r.uFrame.pop(l),r.pFrame.pop(u)):g.isBkr&&(r.pFrame.savePhrase(g.lower,t,r.phraseLength),r.uFrame.savePhrase(g.lower,t,r.phraseLength)))},z=function(r,a,l){i.push({lookAround:o.LOOKAROUND_AHEAD,anchor:a,charsEnd:s,charsLength:n}),s=d.length,n=d.length-t,e(r+1,a,l);let c=i.pop();switch(s=c.charsEnd,n=c.charsLength,l.phraseLength=0,l.state){case o.EMPTY:case o.MATCH:l.state=o.EMPTY;break;case o.NOMATCH:l.state=o.NOMATCH;break;default:throw Error(`opAND: invalid state ${l.state}`)}},j=function(r,a,l){i.push({lookAround:o.LOOKAROUND_AHEAD,anchor:a,charsEnd:s,charsLength:n}),s=d.length,n=d.length-t,e(r+1,a,l);let c=i.pop();switch(s=c.charsEnd,n=c.charsLength,l.phraseLength=0,l.state){case o.EMPTY:case o.MATCH:l.state=o.NOMATCH;break;case o.NOMATCH:l.state=o.EMPTY;break;default:throw Error(`opNOT: invalid state ${l.state}`)}},Y=function(e,t,r){let n=h[e];r.state=o.NOMATCH,t<s&&n.min<=d[t]&&d[t]<=n.max&&(r.state=o.MATCH,r.phraseLength=1)},q=function(e,t,r){let n;let i=h[e],a=i.string.length;if(r.state=o.NOMATCH,t+a<=s){for(n=0;n<a;n+=1)if(d[t+n]!==i.string[n])return;r.state=o.MATCH,r.phraseLength=a}},Z=function(e,t,r){let n,i;let a=h[e];r.state=o.NOMATCH;let l=a.string.length;if(0===l){r.state=o.EMPTY;return}if(t+l<=s){for(n=0;n<l;n+=1)if((i=d[t+n])>=65&&i<=90&&(i+=32),i!==a.string[n])return;r.state=o.MATCH,r.phraseLength=l}},X=function(e,t,r){r.state=o.NOMATCH,r.phraseLength=0,r.state=0===t?o.EMPTY:o.NOMATCH},W=function(e,t,r){r.state=o.NOMATCH,r.phraseLength=0,r.state=t===d.length?o.EMPTY:o.NOMATCH},J=function(e,t,r){let n,i,a,l;let c=h[e];r.state=o.NOMATCH,l=c.index<b.length?b[c.index].lower:y[c.index-b.length].lower;let u=c.bkrMode===o.BKR_MODE_PM?r.pFrame.getPhrase(l):r.uFrame.getPhrase(l),p=c.bkrCase===o.BKR_MODE_CI;if(null===u)return;let f=u.phraseIndex,g=u.phraseLength;if(0===g){r.state=o.EMPTY;return}if(t+g<=s){if(p){for(n=0;n<g;n+=1)if(i=d[t+n],a=d[f+n],i>=65&&i<=90&&(i+=32),a>=65&&a<=90&&(a+=32),i!==a)return;r.state=o.MATCH,r.phraseLength=g}else for(n=0;n<g;n+=1)if((i=d[t+n])!==(a=d[f+n]))return;r.state=o.MATCH,r.phraseLength=g}},Q=function(t,r,n){switch(i.push({lookAround:o.LOOKAROUND_BEHIND,anchor:r}),e(t+1,r,n),i.pop(),n.phraseLength=0,n.state){case o.EMPTY:case o.MATCH:n.state=o.EMPTY;break;case o.NOMATCH:n.state=o.NOMATCH;break;default:throw Error(`opBKA: invalid state ${n.state}`)}},ee=function(t,r,n){switch(i.push({lookAround:o.LOOKAROUND_BEHIND,anchor:r}),e(t+1,r,n),i.pop(),n.phraseLength=0,n.state){case o.EMPTY:case o.MATCH:n.state=o.NOMATCH;break;case o.NOMATCH:n.state=o.EMPTY;break;default:throw Error(`opBKN: invalid state ${n.state}`)}},et=function(t,r,n){let s,i,a,l;let d=h[t],u=n.uFrame.length(),p=n.pFrame.length();c.ast&&(i=c.ast.getLength()),s=!0,a=r,l=0;for(let t=d.children.length-1;t>=0;t-=1)if(e(d.children[t],a,n),a-=n.phraseLength,l+=n.phraseLength,n.state===o.NOMATCH){s=!1;break}s?(n.state=0===l?o.EMPTY:o.MATCH,n.phraseLength=l):(n.state=o.NOMATCH,n.phraseLength=0,n.uFrame.pop(u),n.pFrame.pop(p),c.ast&&c.ast.setLength(i))},er=function(t,r,n){let s,i,a,l;let d=h[t];i=r,a=0,l=0;let u=n.uFrame.length(),p=n.pFrame.length();for(c.ast&&(s=c.ast.getLength());!(i<=0)&&(e(t+1,i,n),n.state!==o.NOMATCH&&n.state!==o.EMPTY&&(l+=1,a+=n.phraseLength,i-=n.phraseLength,l!==d.max)););n.state===o.EMPTY?(n.state=0===a?o.EMPTY:o.MATCH,n.phraseLength=a):l>=d.min?(n.state=0===a?o.EMPTY:o.MATCH,n.phraseLength=a):(n.state=o.NOMATCH,n.phraseLength=0,n.uFrame.pop(u),n.pFrame.pop(p),c.ast&&c.ast.setLength(s))},en=function(e,t,r){let n=h[e];if(r.state=o.NOMATCH,r.phraseLength=0,t>0){let e=d[t-1];n.min<=e&&e<=n.max&&(r.state=o.MATCH,r.phraseLength=1)}},es=function(e,t,r){let n;let s=h[e];r.state=o.NOMATCH;let i=s.string.length,a=t-i;if(a>=0){for(n=0;n<i;n+=1)if(d[a+n]!==s.string[n])return;r.state=o.MATCH,r.phraseLength=i}},ei=function(e,t,r){let n;let s=h[e];r.state=o.NOMATCH;let i=s.string.length;if(0===i){r.state=o.EMPTY;return}let a=t-i;if(a>=0){for(let e=0;e<i;e+=1)if((n=d[a+e])>=65&&n<=90&&(n+=32),n!==s.string[e])return;r.state=o.MATCH,r.phraseLength=i}},eo=function(e,t,r){let n,s,i,a;let l=h[e];r.state=o.NOMATCH,r.phraseLength=0,a=l.index<b.length?b[l.index].lower:y[l.index-b.length].lower;let c=l.bkrMode===o.BKR_MODE_PM?r.pFrame.getPhrase(a):r.uFrame.getPhrase(a),u=l.bkrCase===o.BKR_MODE_CI;if(null===c)return;let p=c.phraseIndex,f=c.phraseLength;if(0===f){r.state=o.EMPTY,r.phraseLength=0;return}let g=t-f;if(g>=0){if(u){for(n=0;n<f;n+=1)if(s=d[g+n],i=d[p+n],s>=65&&s<=90&&(s+=32),i>=65&&i<=90&&(i+=32),s!==i)return;r.state=o.MATCH,r.phraseLength=f}else for(n=0;n<f;n+=1)if((s=d[g+n])!==(i=d[p+n]))return;r.state=o.MATCH,r.phraseLength=f}};e=function(e,t,r){let n=!0,s=h[e];if((f+=1)>x)throw Error(`parser: maximum number of node hits exceeded: ${x}`);if((u+=1)>p&&(p=u)>A)throw Error(`parser: maximum parse tree depth exceeded: ${A}`);if(r.refresh(),null!==c.trace){let e=v();c.trace.down(s,r.state,t,r.phraseLength,e.anchor,e.lookAround)}if(i[i.length-1].lookAround===o.LOOKAROUND_BEHIND)switch(s.type){case o.ALT:P(e,t,r);break;case o.CAT:et(e,t,r);break;case o.REP:er(e,t,r);break;case o.RNM:K(e,t,r);break;case o.UDT:V(e,t,r);break;case o.AND:z(e,t,r);break;case o.NOT:j(e,t,r);break;case o.TRG:en(e,t,r);break;case o.TBS:es(e,t,r);break;case o.TLS:ei(e,t,r);break;case o.BKR:eo(e,t,r);break;case o.BKA:Q(e,t,r);break;case o.BKN:ee(e,t,r);break;case o.ABG:X(e,t,r);break;case o.AEN:W(e,t,r);break;default:n=!1}else switch(s.type){case o.ALT:P(e,t,r);break;case o.CAT:H(e,t,r);break;case o.REP:F(e,t,r);break;case o.RNM:K(e,t,r);break;case o.UDT:V(e,t,r);break;case o.AND:z(e,t,r);break;case o.NOT:j(e,t,r);break;case o.TRG:Y(e,t,r);break;case o.TBS:q(e,t,r);break;case o.TLS:Z(e,t,r);break;case o.BKR:J(e,t,r);break;case o.BKA:Q(e,t,r);break;case o.BKN:ee(e,t,r);break;case o.ABG:X(e,t,r);break;case o.AEN:W(e,t,r);break;default:n=!1}if(!O()&&t+r.phraseLength>T&&(T=t+r.phraseLength),null!==c.stats&&c.stats.collect(s,r),null!==c.trace){let e=v();c.trace.up(s,r.state,t,r.phraseLength,e.anchor,e.lookAround)}return u-=1,n}}},35403:function(e,t,r){e.exports=function(){let e;let t=r(58276),n=r(8544),s=r(93932),i=[],o=[],a=[],l=[],c=[];this.statsObject="statsObject";let h=function(e,t){return e.lower<t.lower?-1:e.lower>t.lower?1:0},d=function(e,t){return e.total<t.total?1:e.total>t.total?-1:h(e,t)},u=function(e,t){return e.index<t.index?-1:e.index>t.index?1:0},p=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},f=function(){a.length=0,e=new p,a[t.ALT]=new p,a[t.CAT]=new p,a[t.REP]=new p,a[t.RNM]=new p,a[t.TRG]=new p,a[t.TBS]=new p,a[t.TLS]=new p,a[t.UDT]=new p,a[t.AND]=new p,a[t.NOT]=new p,a[t.BKR]=new p,a[t.BKA]=new p,a[t.BKN]=new p,a[t.ABG]=new p,a[t.AEN]=new p,l.length=0;for(let e=0;e<i.length;e+=1)l.push({empty:0,match:0,nomatch:0,total:0,name:i[e].name,lower:i[e].lower,index:i[e].index});if(o.length>0){c.length=0;for(let e=0;e<o.length;e+=1)c.push({empty:0,match:0,nomatch:0,total:0,name:o[e].name,lower:o[e].lower,index:o[e].index})}},g=function(e,r){switch(e.total+=1,r){case t.EMPTY:e.empty+=1;break;case t.MATCH:e.match+=1;break;case t.NOMATCH:e.nomatch+=1;break;default:throw Error(`stats.js: collect(): incStat(): unrecognized state: ${r}`)}},m=function(e,t){return`<tr><td class="${s.CLASS_ACTIVE}">${e}</td><td class="${s.CLASS_EMPTY}">${t.empty}</td><td class="${s.CLASS_MATCH}">${t.match}</td><td class="${s.CLASS_NOMATCH}">${t.nomatch}</td><td class="${s.CLASS_ACTIVE}">${t.total}</td></tr>
`},b=function(){return""+(m("ALT",a[t.ALT])+m("CAT",a[t.CAT])+m("REP",a[t.REP])+m("RNM",a[t.RNM])+m("TRG",a[t.TRG])+m("TBS",a[t.TBS])+m("TLS",a[t.TLS])+m("UDT",a[t.UDT])+m("AND",a[t.AND])+m("NOT",a[t.NOT])+m("BKR",a[t.BKR])+m("BKA",a[t.BKA])+m("BKN",a[t.BKN])+m("ABG",a[t.ABG])+m("AEN",a[t.AEN])+m("totals",e))},y=function(){let e="";e+="<tr><th></th><th></th><th></th><th></th><th></th></tr>\n<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>\n";for(let t=0;t<i.length;t+=1)l[t].total>0&&(e+=`<tr><td class="${s.CLASS_ACTIVE}">${l[t].name}</td><td class="${s.CLASS_EMPTY}">${l[t].empty}</td><td class="${s.CLASS_MATCH}">${l[t].match}</td><td class="${s.CLASS_NOMATCH}">${l[t].nomatch}</td><td class="${s.CLASS_ACTIVE}">${l[t].total}</td></tr>
`);if(o.length>0){e+="<tr><th></th><th></th><th></th><th></th><th></th></tr>\n<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>\n";for(let t=0;t<o.length;t+=1)c[t].total>0&&(e+=`<tr><td class="${s.CLASS_ACTIVE}">${c[t].name}</td><td class="${s.CLASS_EMPTY}">${c[t].empty}</td><td class="${s.CLASS_MATCH}">${c[t].match}</td><td class="${s.CLASS_NOMATCH}">${c[t].nomatch}</td><td class="${s.CLASS_ACTIVE}">${c[t].total}</td></tr>
`)}return e};this.validate=function(e){let t=!1;return"string"==typeof e&&"stats"===e&&(t=!0),t},this.init=function(e,t){i=e,o=t,f()},this.collect=function(r,n){g(e,n.state,n.phraseLength),g(a[r.type],n.state,n.phraseLength),r.type===t.RNM&&g(l[r.index],n.state,n.phraseLength),r.type===t.UDT&&g(c[r.index],n.state,n.phraseLength)},this.toHtml=function(e,t){let r="";for(r+=`<table class="${s.CLASS_STATS}">
`,"string"==typeof t&&(r+=`<caption>${t}</caption>
`),r+=`<tr><th class="${s.CLASS_ACTIVE}">ops</th>
<th class="${s.CLASS_EMPTY}">EMPTY</th>
<th class="${s.CLASS_MATCH}">MATCH</th>
<th class="${s.CLASS_NOMATCH}">NOMATCH</th>
<th class="${s.CLASS_ACTIVE}">totals</th></tr>
`;;){if(null==e||"ops"===e){r+=b();break}if("index"===e){l.sort(u),c.length>0&&c.sort(u),r+=b()+y();break}if("hits"===e){l.sort(d),c.length>0&&c.sort(u),r+=b()+y();break}"alpha"===e&&(l.sort(h),c.length>0&&c.sort(h),r+=b()+y());break}return r+"</table>\n"},this.toHtmlPage=function(e,t,r){return n.htmlToPage(this.toHtml(e,t),r)}}},93932:function(e){e.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}},99290:function(e,t,r){e.exports=function(){let e=r(8544),t=r(93932),n=new(r(42761)),s=r(58276),i="trace.js: ",o=this,a=[],l=5e3,c=-1,h=0,d=0,u=[],p=null,f=null,g=null,m=[],b=[],y=`<span class="${t.CLASS_LINEEND}">&bull;</span>`,E=`<span class="${t.CLASS_LINEEND}">&hellip;</span>`,T=`<span class="${t.CLASS_EMPTY}">&#120634;</span>`,A=function(){let e=function(e){m[s.ALT]=e,m[s.CAT]=e,m[s.REP]=e,m[s.TLS]=e,m[s.TBS]=e,m[s.TRG]=e,m[s.AND]=e,m[s.NOT]=e,m[s.BKR]=e,m[s.BKA]=e,m[s.BKN]=e,m[s.ABG]=e,m[s.AEN]=e},t=0;for(let e in o.filter.operators)t+=1;if(0===t){e(!1);return}for(let t in o.filter.operators){let r=t.toUpperCase();if("<ALL>"===r){e(!0);return}if("<NONE>"===r){e(!1);return}}for(let t in e(!1),o.filter.operators){let e=t.toUpperCase();if("ALT"===e)m[s.ALT]=!0===o.filter.operators[t];else if("CAT"===e)m[s.CAT]=!0===o.filter.operators[t];else if("REP"===e)m[s.REP]=!0===o.filter.operators[t];else if("AND"===e)m[s.AND]=!0===o.filter.operators[t];else if("NOT"===e)m[s.NOT]=!0===o.filter.operators[t];else if("TLS"===e)m[s.TLS]=!0===o.filter.operators[t];else if("TBS"===e)m[s.TBS]=!0===o.filter.operators[t];else if("TRG"===e)m[s.TRG]=!0===o.filter.operators[t];else if("BKR"===e)m[s.BKR]=!0===o.filter.operators[t];else if("BKA"===e)m[s.BKA]=!0===o.filter.operators[t];else if("BKN"===e)m[s.BKN]=!0===o.filter.operators[t];else if("ABG"===e)m[s.ABG]=!0===o.filter.operators[t];else if("AEN"===e)m[s.AEN]=!0===o.filter.operators[t];else throw Error(`${i}initOpratorFilter: '${t}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},x=function(){let e,t;let r=function(e){m[s.RNM]=e,m[s.UDT]=e;let t=f.length+g.length;b.length=0;for(let r=0;r<t;r+=1)b.push(e)},n=[];for(t=0;t<f.length;t+=1)n.push(f[t].lower);for(t=0;t<g.length;t+=1)n.push(g[t].lower);for(let t in b.length=0,e=0,o.filter.rules)e+=1;if(0===e){r(!0);return}for(let e in o.filter.rules){let t=e.toLowerCase();if("<all>"===t){r(!0);return}if("<none>"===t){r(!1);return}}for(let e in r(!1),m[s.RNM]=!0,m[s.UDT]=!0,o.filter.rules){let r=e.toLowerCase();if((t=n.indexOf(r))<0)throw Error(`${i}initRuleFilter: '${e}' not a valid rule or udt name`);b[t]=!0===o.filter.rules[e]}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(e,t){if(c=-1,"number"==typeof e&&e>0)l=Math.ceil(e);else{l=0;return}"number"==typeof t&&(c=Math.floor(t))<0&&(c=-1)},this.getMaxRecords=function(){return l},this.getLastRecord=function(){return c},this.init=function(e,t,r){a.length=0,u.length=0,h=0,d=0,p=r,f=e,g=t,A(),x(),n.init(l)};let k=function(e){return e.type===s.RNM?!!m[e.type]&&!!b[e.index]:e.type===s.UDT?!!m[e.type]&&!!b[f.length+e.index]:m[e.type]},S=function(e){return -1===c||e<=c};this.down=function(e,t,r,s,i,o){S(h)&&k(e)&&(u.push(h),a[n.increment()]={dirUp:!1,depth:d,thisLine:h,thatLine:void 0,opcode:e,state:t,phraseIndex:r,phraseLength:s,lookAnchor:i,lookAround:o},h+=1,d+=1)},this.up=function(e,t,r,s,i,o){if(S(h)&&k(e)){let l=h,c=u.pop(),p=n.getListIndex(c);-1!==p&&(a[p].thatLine=l),d-=1,a[n.increment()]={dirUp:!0,depth:d,thisLine:l,thatLine:c,opcode:e,state:t,phraseIndex:r,phraseLength:s,lookAnchor:i,lookAround:o},h+=1}};let w=function(){let t,r,i,o,l;function c(t,r){let n,i,o;if(r)switch(t.op={id:r.type,name:e.opcodeToString(r.type)},t.opData=void 0,r.type){case s.RNM:t.opData=f[r.index].name;break;case s.UDT:t.opData=g[r.index].name;break;case s.BKR:n=r.index<f.length?f[r.index].name:g[r.index-f.length].name,i=r.bkrCase===s.BKR_MODE_CI?"%i":"%s",o=r.bkrMode===s.BKR_MODE_UM?"%u":"%p",t.opData=`\\\\${i}${o}${n}`;break;case s.TLS:t.opData=[];for(let e=0;e<r.string.length;e+=1)t.opData.push(r.string[e]);break;case s.TBS:t.opData=[];for(let e=0;e<r.string.length;e+=1)t.opData.push(r.string[e]);break;case s.TRG:case s.REP:t.opData=[r.min,r.max];break;default:throw Error("unrecognized opcode")}else t.op={id:void 0,name:void 0},t.opData=void 0}function h(e,t,r){return e===s.MATCH?{index:t,length:r}:e===s.NOMATCH||e===s.EMPTY?{index:t,length:0}:null}let u=-1;function m(t,r,n){let s={id:u++,branch:-1,parent:t,up:!1,down:!1,depth:n,children:[]};return r?(s.down=!0,s.state={id:r.state,name:e.stateToString(r.state)},s.phrase=null,c(s,r.opcode)):(s.state={id:void 0,name:void 0},s.phrase=h(),c(s,void 0)),s}function b(t,r){r&&(t.up=!0,t.state={id:r.state,name:e.stateToString(r.state)},t.phrase=h(r.state,r.phraseIndex,r.phraseLength),t.down||c(t,r.opcode))}let y=0,E=-1,T=1,A=[],x=!0,k=m(null,null,-1);for(A.push(k),r=k,n.forEach(e=>{if(o=a[e],x&&(x=!1,o.depth>0)){let e=o.dirUp?o.depth+1:o.depth;for(let t=0;t<e;t+=1)i=r,r=m(r,null,t),A.push(r),i.children.push(r)}o.dirUp?(b(r=A.pop(),o),r=A[A.length-1]):(i=r,r=m(r,o,o.depth),A.push(r),i.children.push(r))});A.length>1;)b(r=A.pop(),null);if(0===k.children.length)throw Error("trace.toTree(): parse tree has no nodes");if(0===A.length)throw Error("trace.toTree(): integrity check: dummy root node disappeared?");let S=t=k.children[0];for(;t&&!t.down&&!t.up;)S=t,t=t.children[0];(t=S).leftMost=!0,t.rightMost=!0,function e(t){if(E+=1,t.branch=T,E>d&&(d=E),0===t.children.length)y+=1;else for(let r=0;r<t.children.length;r+=1)r>0&&(T+=1),t.children[r].leftMost=!1,t.children[r].rightMost=!1,t.leftMost&&(t.children[r].leftMost=0===r),t.rightMost&&(t.children[r].rightMost=r===t.children.length-1),e(t.children[r]);E-=1}(t),t.branch=0;let w={};w.string=[];for(let e=0;e<p.length;e+=1)w.string[e]=p[e];w.rules=[];for(let e=0;e<f.length;e+=1)w.rules[e]=f[e].name;w.udts=[];for(let e=0;e<g.length;e+=1)w.udts[e]=g[e].name;return w.id={},w.id.ALT={id:s.ALT,name:"ALT"},w.id.CAT={id:s.CAT,name:"CAT"},w.id.REP={id:s.REP,name:"REP"},w.id.RNM={id:s.RNM,name:"RNM"},w.id.TLS={id:s.TLS,name:"TLS"},w.id.TBS={id:s.TBS,name:"TBS"},w.id.TRG={id:s.TRG,name:"TRG"},w.id.UDT={id:s.UDT,name:"UDT"},w.id.AND={id:s.AND,name:"AND"},w.id.NOT={id:s.NOT,name:"NOT"},w.id.BKR={id:s.BKR,name:"BKR"},w.id.BKA={id:s.BKA,name:"BKA"},w.id.BKN={id:s.BKN,name:"BKN"},w.id.ABG={id:s.ABG,name:"ABG"},w.id.AEN={id:s.AEN,name:"AEN"},w.id.ACTIVE={id:s.ACTIVE,name:"ACTIVE"},w.id.MATCH={id:s.MATCH,name:"MATCH"},w.id.EMPTY={id:s.EMPTY,name:"EMPTY"},w.id.NOMATCH={id:s.NOMATCH,name:"NOMATCH"},w.treeDepth=d,w.leafNodes=y,l=t.down?t.up?"none":"right":t.up?"left":"both",w.branchesIncomplete=l,w.tree=function e(t,r){let n;let s={};if(s.id=t.id,s.branch=t.branch,s.leftMost=t.leftMost,s.rightMost=t.rightMost,n=t.state.name?t.state.name:"ACTIVE",s.state={id:t.state.id,name:n},n=t.op.name?t.op.name:"?",s.op={id:t.op.id,name:n},"string"==typeof t.opData)s.opData=t.opData;else if(Array.isArray(t.opData)){s.opData=[];for(let e=0;e<t.opData.length;e+=1)s.opData[e]=t.opData[e]}else s.opData=void 0;t.phrase?s.phrase={index:t.phrase.index,length:t.phrase.length}:s.phrase=null,s.depth=t.depth,s.children=[];for(let n=0;n<t.children.length;n+=1){let i=n!==t.children.length-1;s.children[n]=e(t.children[n],r,i)}return s}(t,t.depth,!1),w};this.toTree=function(e){let t=w();return e?JSON.stringify(t):t},this.toHtmlPage=function(t,r,n){return e.htmlToPage(this.toHtml(t,r),n)};let C=function(e,r){let n;switch(e){case 16:n="hexidecimal";break;case 10:n="decimal";break;case 8:n="ASCII";break;case 32:n="UNICODE";break;default:throw Error(`${i}htmlHeader: unrecognized mode: ${e}`)}let s="";return s+=`<p>display mode: ${n}</p>
<table class="${t.CLASS_TRACE}">
`,"string"==typeof r&&(s+=`<caption>${r}</caption>`),s};this.indent=function(e){let t="";for(let r=0;r<e;r+=1)t+=".";return t};let M=function(e,t){let r="";if(t.type===s.TRG){if(16===e||32===e){let n=t.min.toString(16).toUpperCase();n.length%2!=0&&(n=`0${n}`),r+=(16===e?"%x":"U+")+n,(n=t.max.toString(16).toUpperCase()).length%2!=0&&(n=`0${n}`),r+=`&ndash;${n}`}else r=`%d${t.min.toString(10)}&ndash;${t.max.toString(10)}`}return r},v=function(e,t){let r="";if(t.type===s.REP){if(16===e){let e=t.min.toString(16).toUpperCase();e.length%2!=0&&(e=`0${e}`),r=`x${e}`,t.max<1/0?(e=t.max.toString(16).toUpperCase()).length%2!=0&&(e=`0${e}`):e="inf",r+=`&ndash;${e}`}else r=t.max<1/0?`${t.min.toString(10)}&ndash;${t.max.toString(10)}`:`${t.min.toString(10)}&ndash;inf`}return r},O=function(e,t){let r="";if(t.type===s.TBS){let n=Math.min(t.string.length,10);if(16===e||32===e){r+=16===e?"%x":"U+";for(let e=0;e<n;e+=1){let n;e>0&&(r+="."),(n=t.string[e].toString(16).toUpperCase()).length%2!=0&&(n=`0${n}`),r+=n}}else{r="%d";for(let e=0;e<n;e+=1)e>0&&(r+="."),r+=t.string[e].toString(10)}n<t.string.length&&(r+=E)}return r},$=function(t,r){let n="";if(r.type===s.TLS){let s=Math.min(r.string.length,5);if(16===t||10===t){let e,i,o;16===t?(n="%x",o=16):(n="%d",o=10);for(let t=0;t<s;t+=1)t>0&&(n+="."),(i=r.string[t])>=97&&i<=122?n+=`${(e=i-32).toString(o)}/${i.toString(o)}`.toUpperCase():i>=65&&i<=90?(e=i,i+=32,n+=`${e.toString(o)}/${i.toString(o)}`.toUpperCase()):n+=i.toString(o).toUpperCase();s<r.string.length&&(n+=E)}else{n='"';for(let t=0;t<s;t+=1)n+=e.asciiChars[r.string[t]];s<r.string.length&&(n+=E),n+='"'}}return n},L=function(t,r,n,s,i){if(0===s)return"";let o="",a=i?",":"";switch(t){case 16:o=a+e.charsToHex(r,n,s);break;case 10:if(i)return`,${e.charsToDec(r,n,s)}`;o=a+e.charsToDec(r,n,s);break;case 32:o=e.charsToUnicode(r,n,s);break;default:o=e.charsToAsciiHtml(r,n,s)}return o},N=function(e,r,n,i,o,a){let l,c,h,d,u="",p=y,f=`<span class="${t.CLASS_LOOKBEHIND}">`,g=`<span class="${t.CLASS_REMAINDER}">`,m="</span>",b=!1;switch(n){case s.EMPTY:u+=T;case s.NOMATCH:case s.MATCH:case s.ACTIVE:c=a-(l=i-o),h=a,d=r.length-h;break;default:throw Error("unrecognized state")}return p=y,c>80?(c=80,p=E,d=0):c+d>80&&(p=E,d=80-c),c>0&&(u+=f+L(e,r,l,c,b)+m,b=!0),d>0&&(u+=g+L(e,r,h,d,b)+m),u+p},B=function(e,r,n,i,o,a){let l,c,h,d,u="",p=y,f=`<span class="${t.CLASS_REMAINDER}">`,g="</span>",m=!1;switch(n){case s.EMPTY:u+=T;case s.NOMATCH:case s.ACTIVE:l=i,c=0,h=i,d=r.length-h;break;case s.MATCH:l=i,h=i+(c=o),d=r.length-h;break;default:throw Error("unrecognized state")}return p=y,c>80?(c=80,p=E,d=0):c+d>80&&(p=E,d=80-c),c>0&&(u+=a+L(e,r,l,c,m)+g,m=!0),d>0&&(u+=f+L(e,r,h,d,m)+g),u+p},R=function(e,r,n,s,i){let o=`<span class="${t.CLASS_LOOKAHEAD}">`;return B(e,r,n,s,i,o)},I=function(e,r,n,s,i){let o=`<span class="${t.CLASS_MATCH}">`;return B(e,r,n,s,i,o)},_=function(r){let i,l,c,h,d,u;if(null===f)return"";let m="";return m+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th><th>operator</th><th>phrase</th></tr>\n",n.forEach(n=>{let b=a[n];switch(i=b.thisLine,l=void 0!==b.thatLine?b.thatLine:"--",c=!1,h=!1,d=!1,b.lookAround===s.LOOKAROUND_AHEAD&&(c=!0,d=!0,u=b.lookAnchor),(b.opcode.type===s.AND||b.opcode.type===s.NOT)&&(c=!0,d=!0,u=b.phraseIndex),b.lookAround===s.LOOKAROUND_BEHIND&&(h=!0,d=!0,u=b.lookAnchor),(b.opcode.type===s.BKA||b.opcode.type===s.BKN)&&(h=!0,d=!0,u=b.phraseIndex),m+=`<tr><td>${i}</td><td>${l}</td><td>${b.phraseIndex}</td><td>${b.phraseLength}</td><td>${b.depth}</td><td>`,b.state){case s.ACTIVE:m+=`<span class="${t.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case s.MATCH:m+=`<span class="${t.CLASS_MATCH}">&uarr;M</span>`;break;case s.NOMATCH:m+=`<span class="${t.CLASS_NOMATCH}">&uarr;N</span>`;break;case s.EMPTY:m+=`<span class="${t.CLASS_EMPTY}">&uarr;E</span>`;break;default:m+=`<span class="${t.CLASS_ACTIVE}">--</span>`}if(m+="</td><td>"+o.indent(b.depth),c?m+=`<span class="${t.CLASS_LOOKAHEAD}">`:h&&(m+=`<span class="${t.CLASS_LOOKBEHIND}">`),m+=e.opcodeToString(b.opcode.type),b.opcode.type===s.RNM&&(m+=`(${f[b.opcode.index].name}) `),b.opcode.type===s.BKR){let e=b.opcode.bkrCase===s.BKR_MODE_CI?"%i":"%s",t=b.opcode.bkrMode===s.BKR_MODE_UM?"%u":"%p";m+=`(\\${e}${t}${f[b.opcode.index].name}) `}b.opcode.type===s.UDT&&(m+=`(${g[b.opcode.index].name}) `),b.opcode.type===s.TRG&&(m+=`(${M(r,b.opcode)}) `),b.opcode.type===s.TBS&&(m+=`(${O(r,b.opcode)}) `),b.opcode.type===s.TLS&&(m+=`(${$(r,b.opcode)}) `),b.opcode.type===s.REP&&(m+=`(${v(r,b.opcode)}) `),d&&(m+="</span>"),m+="</td><td>",h?m+=N(r,p,b.state,b.phraseIndex,b.phraseLength,u):c?m+=R(r,p,b.state,b.phraseIndex,b.phraseLength):m+=I(r,p,b.state,b.phraseIndex,b.phraseLength),m+="</td></tr>\n"}),m+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th><th>operator</th><th>phrase</th></tr>\n</table>\n"};this.toHtml=function(e,r){let n=8;if("string"==typeof e&&e.length>=3){let t=e.toLowerCase().slice(0,3);"hex"===t?n=16:"dec"===t?n=10:"uni"===t&&(n=32)}return C(n,r)+_(n)+""+`</table>
<p class="${t.CLASS_MONOSPACE}">legend:<br>
(a)&nbsp;-&nbsp;line number<br>
(b)&nbsp;-&nbsp;matching line number<br>
(c)&nbsp;-&nbsp;phrase offset<br>
(d)&nbsp;-&nbsp;phrase length<br>
(e)&nbsp;-&nbsp;tree depth<br>
(f)&nbsp;-&nbsp;operator state<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to 80 characters of the phrase being matched<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">matched characters</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${T} empty string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${y} end of input string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${E} input string display truncated<br>
</p>
<p class="${t.CLASS_MONOSPACE}">
<sup>&dagger;</sup>original ABNF operators:<br>
ALT - alternation<br>
CAT - concatenation<br>
REP - repetition<br>
RNM - rule name<br>
TRG - terminal range<br>
TLS - terminal literal string (case insensitive)<br>
TBS - terminal binary string (case sensitive)<br>
<br>
<sup>&Dagger;</sup>super set SABNF operators:<br>
UDT - user-defined terminal<br>
AND - positive look ahead<br>
NOT - negative look ahead<br>
BKA - positive look behind<br>
BKN - negative look behind<br>
BKR - back reference<br>
ABG - anchor - begin of input string<br>
AEN - anchor - end of input string<br>
</p>
`}}},8544:function(e,t,r){let n=r(93932),s=r(20979),i=r(91593),o=r(58276),a="utilities.js: ",l=this,c=function(e,t,r){let n;let s=t;for(;;){if(e<=0){s=0,n=0;break}if("number"!=typeof s){s=0,n=e;break}if(s>=e){s=e,n=e;break}if("number"!=typeof r){n=e;break}(n=s+r)>e&&(n=e);break}return{beg:s,end:n}};t.htmlToPage=function(e,t){if("string"!=typeof e)throw Error(`${a}htmlToPage: input HTML is not a string`);return`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>${"string"!=typeof t?"htmlToPage":t}</title>
<style>
`+i()+"</style>\n</head>\n<body>\n"+`<p>${new Date}</p>
`+e+"</body>\n</html>\n"},t.parserResultToHtml=function(e,t){let r,s,i=null;"string"==typeof t&&""!==t&&(i=t),r=!0===e.success?`<span class="${n.CLASS_MATCH}">true</span>`:`<span class="${n.CLASS_NOMATCH}">false</span>`,s=e.state===o.EMPTY?`<span class="${n.CLASS_EMPTY}">EMPTY</span>`:e.state===o.MATCH?`<span class="${n.CLASS_MATCH}">MATCH</span>`:e.state===o.NOMATCH?`<span class="${n.CLASS_NOMATCH}">NOMATCH</span>`:`<span class="${n.CLASS_NOMATCH}">unrecognized</span>`;let a="";return a+=`<table class="${n.CLASS_STATE}">
`,i&&(a+=`<caption>${i}</caption>
`),a+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
<tr><td>parser success</td><td>${r}</td>
<td><span class="${n.CLASS_MATCH}">true</span> if the parse succeeded,
 <span class="${n.CLASS_NOMATCH}">false</span> otherwise<br><i>NOTE: for success, entire string must be matched</i></td></tr>
<tr><td>parser state</td><td>${s}</td>
<td><span class="${n.CLASS_EMPTY}">EMPTY</span>, <span class="${n.CLASS_MATCH}">MATCH</span> or 
<span class="${n.CLASS_NOMATCH}">NOMATCH</span></td></tr>
<tr><td>string length</td><td>${e.length}</td><td>length of the input (sub)string</td></tr>
<tr><td>matched length</td><td>${e.matched}</td><td>number of input string characters matched</td></tr>
<tr><td>max matched</td><td>${e.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
<tr><td>max tree depth</td><td>${e.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
<tr><td>node hits</td><td>${e.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
<tr><td>input length</td><td>${e.inputLength}</td><td>length of full input string</td></tr>
<tr><td>sub-string begin</td><td>${e.subBegin}</td><td>sub-string first character index</td></tr>
<tr><td>sub-string end</td><td>${e.subEnd}</td><td>sub-string end-of-string index</td></tr>
<tr><td>sub-string length</td><td>${e.subLength}</td><td>sub-string length</td></tr>
</table>
`},t.charsToString=function(e,t,r){let n,i;if("number"==typeof t){if(t>=e.length)return"";n=t<0?0:t}else n=0;if("number"==typeof r){if(r<=0)return"";i=r>e.length-n?e.length:n+r}else i=e.length;return n<i?s.encode("UTF16LE",e.slice(n,i)).toString("utf16le"):""},t.stringToChars=function(e){return s.decode("STRING",e)},t.opcodeToString=function(e){let t="unknown";switch(e){case o.ALT:t="ALT";break;case o.CAT:t="CAT";break;case o.RNM:t="RNM";break;case o.UDT:t="UDT";break;case o.AND:t="AND";break;case o.NOT:t="NOT";break;case o.REP:t="REP";break;case o.TRG:t="TRG";break;case o.TBS:t="TBS";break;case o.TLS:t="TLS";break;case o.BKR:t="BKR";break;case o.BKA:t="BKA";break;case o.BKN:t="BKN";break;case o.ABG:t="ABG";break;case o.AEN:t="AEN";break;default:throw Error("unrecognized opcode")}return t},t.stateToString=function(e){let t="unknown";switch(e){case o.ACTIVE:t="ACTIVE";break;case o.MATCH:t="MATCH";break;case o.EMPTY:t="EMPTY";break;case o.NOMATCH:t="NOMATCH";break;default:throw Error("unrecognized state")}return t},t.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],t.charToHex=function(e){let t=e.toString(16).toUpperCase();switch(t.length){case 1:case 3:case 7:t=`0${t}`;break;case 2:case 6:t=`00${t}`;break;case 4:break;case 5:t=`000${t}`;break;default:throw Error("unrecognized option")}return t},t.charsToDec=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${a}charsToDec: input must be an array of integers`);let s=c(e.length,t,r);if(s.end>s.beg){n+=e[s.beg];for(let t=s.beg+1;t<s.end;t+=1)n+=`,${e[t]}`}return n},t.charsToHex=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${a}charsToHex: input must be an array of integers`);let s=c(e.length,t,r);if(s.end>s.beg){n+=`\\x${l.charToHex(e[s.beg])}`;for(let t=s.beg+1;t<s.end;t+=1)n+=`,\\x${l.charToHex(e[t])}`}return n},t.charsToHtmlEntities=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${a}charsToHex: input must be an array of integers`);let s=c(e.length,t,r);if(s.end>s.beg)for(let t=s.beg;t<s.end;t+=1)n+=`&#x${e[t].toString(16)};`;return n},t.charsToUnicode=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${a}charsToUnicode: input must be an array of integers`);let s=c(e.length,t,r);if(s.end>s.beg)for(let t=s.beg;t<s.end;t+=1){var i;((i=e[t])>=55296&&i<=57343||i>1114111?1:0)?n+=` U+${l.charToHex(e[t])}`:n+=`&#${e[t]};`}return n},t.charsToJsUnicode=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${a}charsToJsUnicode: input must be an array of integers`);let s=c(e.length,t,r);if(s.end>s.beg){n+=`\\u${l.charToHex(e[s.beg])}`;for(let t=s.beg+1;t<s.end;t+=1)n+=`,\\u${l.charToHex(e[t])}`}return n},t.charsToAscii=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${a}charsToAscii: input must be an array of integers`);let s=c(e.length,t,r);for(let t=s.beg;t<s.end;t+=1){let r=e[t];r>=32&&r<=126?n+=String.fromCharCode(r):n+=`\\x${l.charToHex(r)}`}return n},t.charsToAsciiHtml=function(e,t,r){let s;if(!Array.isArray(e))throw Error(`${a}charsToAsciiHtml: input must be an array of integers`);let i="",o=c(e.length,t,r);for(let t=o.beg;t<o.end;t+=1)(s=e[t])<32||127===s?i+=`<span class="${n.CLASS_CTRLCHAR}">${l.asciiChars[s]}</span>`:s>127?i+=`<span class="${n.CLASS_CTRLCHAR}">U+${l.charToHex(s)}</span>`:i+=l.asciiChars[s];return i},t.stringToAsciiHtml=function(e){let t=s.decode("STRING",e);return this.charsToAsciiHtml(t)}},83999:function(e,t){"use strict";var r=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;t.G=function(e){if(!e||e.length>254||!r.test(e))return!1;var t=e.split("@");return!(t[0].length>64||t[1].split(".").some(function(e){return e.length>63}))}},86672:function(){},42156:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ParsedMessage=void 0;let s=n(r(75528)),i=n(r(28737)),o=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = authority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = 1*( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;t.ParsedMessage=class{constructor(e){let t=new s.default(o);if(t.generate(),t.errors.length)throw console.error(t.errorsToAscii()),console.error(t.linesToAscii()),console.log(t.displayAttributeErrors()),Error("ABNF grammar has errors");let r=t.toObject(),n=new i.default.parser;n.ast=new i.default.ast;let a=i.default.ids;n.ast.callbacks.domain=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.domain=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks.address=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.address=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks.statement=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.statement=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks.uri=function(e,t,r,n,s){let o=a.SEM_OK;return e!==a.SEM_PRE||s.uri||(s.uri=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks.version=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.version=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks["chain-id"]=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.chainId=parseInt(i.default.utils.charsToString(t,r,n))),o},n.ast.callbacks.nonce=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.nonce=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks["issued-at"]=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.issuedAt=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks["expiration-time"]=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.expirationTime=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks["not-before"]=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.notBefore=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks["request-id"]=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.requestId=i.default.utils.charsToString(t,r,n)),o},n.ast.callbacks.resources=function(e,t,r,n,s){let o=a.SEM_OK;return e===a.SEM_PRE&&(s.resources=i.default.utils.charsToString(t,r,n).slice(3).split("\n- ")),o};let l=n.parse(r,"sign-in-with-ethereum",e);if(!l.success)throw Error(`Invalid message: ${JSON.stringify(l)}`);let c={};for(let[e,t]of(n.ast.translate(c),Object.entries(c)))this[e]=t}}},67956:function(e,t,r){"use strict";var n,s,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.generateNonce=t.checkContractWalletSignature=t.SiweMessage=t.SignatureType=t.ErrorTypes=void 0;let o=r(31416),a=r(38601),l=r(42156),c=r(93270);(n=s=t.ErrorTypes||(t.ErrorTypes={})).INVALID_SIGNATURE="Invalid signature.",n.EXPIRED_MESSAGE="Expired message.",n.MALFORMED_SESSION="Malformed session.",(t.SignatureType||(t.SignatureType={})).PERSONAL_SIGNATURE="Personal signature";class h{constructor(e){if("string"==typeof e){let t=new l.ParsedMessage(e);this.domain=t.domain,this.address=t.address,this.statement=t.statement,this.uri=t.uri,this.version=t.version,this.nonce=t.nonce,this.issuedAt=t.issuedAt,this.expirationTime=t.expirationTime,this.notBefore=t.notBefore,this.requestId=t.requestId,this.chainId=t.chainId,this.resources=t.resources}else Object.assign(this,e),"string"==typeof this.chainId&&(this.chainId=parseInt(this.chainId))}regexFromMessage(e){let t=new c.ParsedMessage(e);return t.match}toMessage(){let e=`${this.domain} wants you to sign in with your Ethereum account:`,r=`URI: ${this.uri}`,n=[e,this.address].join("\n"),s=`Version: ${this.version}`;this.nonce||(this.nonce=(0,t.generateNonce)());let i="Chain ID: "+this.chainId,o=`Nonce: ${this.nonce}`,a=[r,s,i,o];if(this.issuedAt&&Date.parse(this.issuedAt),this.issuedAt=this.issuedAt?this.issuedAt:new Date().toISOString(),a.push(`Issued At: ${this.issuedAt}`),this.expirationTime){let e=`Expiration Time: ${this.expirationTime}`;a.push(e)}this.notBefore&&a.push(`Not Before: ${this.notBefore}`),this.requestId&&a.push(`Request ID: ${this.requestId}`),this.resources&&a.push(["Resources:",...this.resources.map(e=>`- ${e}`)].join("\n"));let l=a.join("\n");return n=[n,this.statement].join("\n\n"),this.statement&&(n+="\n"),[n,l].join("\n")}signMessage(){return console&&console.warn&&console.warn("signMessage method is deprecated, use prepareMessage instead."),this.prepareMessage()}prepareMessage(){let e;return this.version,this.toMessage()}validate(e=this.signature,r){return i(this,void 0,void 0,function*(){return new Promise((n,o)=>i(this,void 0,void 0,function*(){let i=this.prepareMessage();try{let o=[];if(i||o.push("`message`"),e||o.push("`signature`"),this.address||o.push("`address`"),o.length>0)throw Error(`${s.MALFORMED_SESSION} missing: ${o.join(", ")}.`);let l=a.ethers.utils.verifyMessage(i,e);if(l!==this.address)try{let e=yield(0,t.checkContractWalletSignature)(this,r);if(!e)throw Error(`${s.INVALID_SIGNATURE}: ${l} !== ${this.address}`)}catch(e){throw e}let c=new h(i);if(c.expirationTime){let e=new Date(c.expirationTime).getTime();if(isNaN(e))throw Error(`${s.MALFORMED_SESSION} invalid expiration date.`);if(new Date().getTime()>=e)throw Error(s.EXPIRED_MESSAGE)}n(c)}catch(e){o(e)}}))})}}t.SiweMessage=h;let d=(e,t)=>i(void 0,void 0,void 0,function*(){if(!t)return!1;try{let r=new a.Contract(e.address,["function isValidSignature(bytes32 _message, bytes _signature) public view returns (bool)"],t),n=a.utils.hashMessage(e.signMessage());return yield r.isValidSignature(n,e.signature)}catch(e){throw e}});t.checkContractWalletSignature=d;let u=()=>(0,o.randomStringForEntropy)(96);t.generateNonce=u},93270:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsedMessage=void 0;let r="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))",n=`\\nURI: (?<uri>${r}?)`,s="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))",i=`\\nIssued At: (?<issuedAt>${s})`,o=`(\\nExpiration Time: (?<expirationTime>${s}))?`,a=`(\\nNot Before: (?<notBefore>${s}))?`,l=`(\\nResources:(?<resources>(\\n- ${r}?)+))?`,c=`^(?<domain>([^?#]*)) wants you to sign in with your Ethereum account:\\n(?<address>0x[a-zA-Z0-9]{40})\\n\\n((?<statement>[^\\n]+)\\n)?${n}\\nVersion: (?<version>1)\\nChain ID: (?<chainId>[0-9]+)\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})${i}${o}${a}(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?${l}$`;t.ParsedMessage=class{constructor(e){var t,r,n,s,i,o,a,l,h,d,u,p,f;let g=RegExp(c,"g"),m=g.exec(e);if(!m)throw Error("Message did not match the regular expression.");this.match=m,this.domain=null===(t=null==m?void 0:m.groups)||void 0===t?void 0:t.domain,this.address=null===(r=null==m?void 0:m.groups)||void 0===r?void 0:r.address,this.statement=null===(n=null==m?void 0:m.groups)||void 0===n?void 0:n.statement,this.uri=null===(s=null==m?void 0:m.groups)||void 0===s?void 0:s.uri,this.version=null===(i=null==m?void 0:m.groups)||void 0===i?void 0:i.version,this.nonce=null===(o=null==m?void 0:m.groups)||void 0===o?void 0:o.nonce,this.chainId=parseInt(null===(a=null==m?void 0:m.groups)||void 0===a?void 0:a.chainId),this.issuedAt=null===(l=null==m?void 0:m.groups)||void 0===l?void 0:l.issuedAt,this.expirationTime=null===(h=null==m?void 0:m.groups)||void 0===h?void 0:h.expirationTime,this.notBefore=null===(d=null==m?void 0:m.groups)||void 0===d?void 0:d.notBefore,this.requestId=null===(u=null==m?void 0:m.groups)||void 0===u?void 0:u.requestId,this.resources=null===(f=null===(p=null==m?void 0:m.groups)||void 0===p?void 0:p.resources)||void 0===f?void 0:f.split("\n- ").slice(1)}}},97544:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(67956),t)},80481:function(e,t,r){!function(e){"use strict";e.exports.is_uri=r,e.exports.is_http_uri=n,e.exports.is_https_uri=s,e.exports.is_web_uri=i,e.exports.isUri=r,e.exports.isHttpUri=n,e.exports.isHttpsUri=s,e.exports.isWebUri=i;var t=function(e){return e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function r(e){if(!(!e||/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)||/%[^0-9a-f]/i.test(e)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))){var r=[],n="",s="",i="",o="",a="",l="";if(n=(r=t(e))[1],s=r[2],i=r[3],o=r[4],a=r[5],n&&n.length&&i.length>=0){if(s&&s.length){if(!(0===i.length||/^\//.test(i)))return}else if(/^\/\//.test(i))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(n.toLowerCase()))return l+=n+":",s&&s.length&&(l+="//"+s),l+=i,o&&o.length&&(l+="?"+o),a&&a.length&&(l+="#"+a),l}}}function n(e,n){if(r(e)){var s=[],i="",o="",a="",l="",c="",h="",d="";if(i=(s=t(e))[1],o=s[2],a=s[3],c=s[4],h=s[5],i){if(n){if("https"!=i.toLowerCase())return}else if("http"!=i.toLowerCase())return;if(!o)return;return/:(\d+)$/.test(o)&&(l=o.match(/:(\d+)$/)[0],o=o.replace(/:\d+$/,"")),d+=i+"://"+o,l&&(d+=l),d+=a,c&&c.length&&(d+="?"+c),h&&h.length&&(d+="#"+h),d}}}function s(e){return n(e,!0)}function i(e){return n(e)||s(e)}}(e=r.nmd(e))},66514:function(e,t,r){"use strict";r.d(t,{FL:function(){return G},mA:function(){return I},$4:function(){return D},LN:function(){return H},QW:function(){return U}});var n=r(67294),s=r(55798),i=r(26729),o=r.n(i);let a={mainnet:{id:1,name:"Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://etherscan.io"}]},ropsten:{id:3,name:"Ropsten",nativeCurrency:{name:"Ropsten Ether",symbol:"ropETH",decimals:18},rpcUrls:["https://ropsten.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://ropsten.etherscan.io"}],testnet:!0},rinkeby:{id:4,name:"Rinkeby",nativeCurrency:{name:"Rinkeby Ether",symbol:"rETH",decimals:18},rpcUrls:["https://rinkeby.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://rinkeby.etherscan.io"}],testnet:!0},goerli:{id:5,name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"gETH",decimals:18},rpcUrls:["https://goerli.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://goerli.etherscan.io"}],testnet:!0},kovan:{id:42,name:"Kovan",nativeCurrency:{name:"Kovan Ether",symbol:"kETH",decimals:18},rpcUrls:["https://kovan.infura.io/v3"],blockExplorers:[{name:"Etherscan",url:"https://kovan.etherscan.io"}],testnet:!0},optimism:{id:10,name:"Optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.optimism.io"],blockExplorers:[{name:"Etherscan",url:"https://optimistic.etherscan.io"}]},optimismKovan:{id:69,name:"Optimism Kovan",nativeCurrency:{name:"Kovan Ether",symbol:"KOR",decimals:18},rpcUrls:["https://kovan.optimism.io"],blockExplorers:[{name:"Etherscan",url:"https://kovan-optimistic.etherscan.io"}],testnet:!0},polygonMainnet:{id:137,name:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com","https://rpc-mainnet.matic.network","https://matic-mainnet.chainstacklabs.com","https://rpc-mainnet.maticvigil.com","https://rpc-mainnet.matic.quiknode.pro","https://matic-mainnet-full-rpc.bwarelabs.com"],blockExplorers:[{name:"Polygonscan",url:"https://polygonscan.com"}]},polygonTestnetMumbai:{id:80001,name:"Mumbai",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://matic-mumbai.chainstacklabs.com","https://rpc-mumbai.maticvigil.com","https://matic-testnet-archive-rpc.bwarelabs.com"],blockExplorers:[{name:"Polygonscan",url:"https://mumbai.polygonscan.com"}],testnet:!0},arbitrumOne:{id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"AETH",decimals:18},rpcUrls:["https://arb1.arbitrum.io/rpc"],blockExplorers:[{name:"Arbiscan",url:"https://arbiscan.io"},{name:"Arbitrum Explorer",url:"https://explorer.arbitrum.io"}]},arbitrumRinkeby:{id:421611,name:"Arbitrum Rinkeby",nativeCurrency:{name:"Arbitrum Rinkeby Ether",symbol:"ARETH",decimals:18},rpcUrls:["https://rinkeby.arbitrum.io/rpc"],blockExplorers:[{name:"Arbitrum Explorer",url:"https://rinkeby-explorer.arbitrum.io"}],testnet:!0},avalanche:{id:43114,name:"Avalanche Mainnet",nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},rpcUrls:["https://api.avax.network/ext/bc/C/rpc"],blockExplorers:[{name:"SnowTrace",url:"https://snowtrace.io"}],testnet:!1},avalancheFuji:{id:43113,name:"Avalanche Fuji Testnet",nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},rpcUrls:["https://api.avax-test.network/ext/bc/C/rpc"],blockExplorers:[{name:"SnowTrace",url:"https://testnet.snowtrace.io"}],testnet:!0},localhost:{id:1337,name:"Localhost",rpcUrls:["https://127.0.0.1:8545"]},hardhat:{id:31337,name:"Hardhat",rpcUrls:["http://127.0.0.1:8545"]}},l=Object.values(a),c=[a.mainnet,a.ropsten,a.rinkeby,a.goerli,a.kovan];a.optimism,a.optimismKovan,a.polygonMainnet,a.polygonTestnetMumbai,a.arbitrumOne,a.arbitrumRinkeby,a.localhost,a.hardhat;let h=e=>"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):e;class d extends Error{name="AddChainError";message="Error adding chain"}class u extends Error{name="ChainNotConfigured";message="Chain not configured"}class p extends Error{name="ConnectorAlreadyConnectedError";message="Connector already connected"}class f extends Error{name="ConnectorNotFoundError";message="Connector not found"}class g extends Error{name="SwitchChainError";message="Error switching chain"}class m extends Error{name="UserRejectedRequestError";message="User rejected request"}class b extends o(){constructor({chains:e=c,options:t}){super(),this.chains=e,this.options=t}isChainUnsupported(e){return!this.chains.some(t=>t.id===e)}}var y=r(241),E=r(56371);let T=e=>e?e.isMetaMask?"MetaMask":e.isCoinbaseWallet?"Coinbase Wallet":e.isFrame?"Frame":e.isTally?"Tally":"Injected":"Injected",A="wagmi.shimDisconnect";class x extends b{id="injected";ready="undefined"!=typeof window&&!!window.ethereum;#e;constructor(e){super({...e,options:e?.options});let t="Injected";"undefined"!=typeof window&&(t=T(window.ethereum)),this.name=t}async connect(){try{let e=this.getProvider();if(!e)throw new f;e.on&&(e.on("accountsChanged",this.onAccountsChanged),e.on("chainChanged",this.onChainChanged),this.options?.shimChainChangedDisconnect||e.on("disconnect",this.onDisconnect));let t=await this.getAccount(),r=await this.getChainId(),n=this.isChainUnsupported(r);return this.options?.shimDisconnect&&"undefined"!=typeof localStorage&&localStorage.setItem(A,"true"),{account:t,chain:{id:r,unsupported:n},provider:e}}catch(e){if(4001===e.code)throw new m;throw e}}async disconnect(){let e=this.getProvider();e?.removeListener&&(e.removeListener("accountsChanged",this.onAccountsChanged),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect),this.options?.shimDisconnect&&"undefined"!=typeof localStorage&&localStorage.removeItem(A))}async getAccount(){let e=this.getProvider();if(!e)throw new f;let t=await e.request({method:"eth_requestAccounts"});return(0,E.getAddress)(t[0])}async getChainId(){let e=this.getProvider();if(!e)throw new f;return await e.request({method:"eth_chainId"}).then(h)}getProvider(){return"undefined"!=typeof window&&window.ethereum&&(this.#e=window.ethereum),this.#e}async getSigner(){let e=this.getProvider(),t=await this.getAccount();return new y.Q(e).getSigner(t)}async isAuthorized(){try{if(this.options?.shimDisconnect&&"undefined"!=typeof localStorage&&!localStorage.getItem(A))return!1;let e=this.getProvider();if(!e)throw new f;let t=await e.request({method:"eth_accounts"}),r=t[0];return!!r}catch{return!1}}async switchChain(e){let t=this.getProvider();if(!t)throw new f;let r=(0,E.hexValue)(e);try{await t.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]});let n=[...this.chains,...l];return n.find(t=>t.id===e)}catch(n){if(4902===n.code)try{let n=this.chains.find(t=>t.id===e);if(!n)throw new u;return await t.request({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:n.rpcUrls,blockExplorerUrls:n.blockExplorers?.map(e=>e.url)}]}),n}catch(e){throw new d}else if(4001===n.code)throw new m;else throw new g}}async watchAsset({address:e,decimals:t=18,image:r,symbol:n}){let s=this.getProvider();if(!s)throw new f;await s.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e,decimals:t,image:r,symbol:n}}})}onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,E.getAddress)(e[0])})};onChainChanged=e=>{let t=h(e),r=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:r}})};onDisconnect=()=>{this.emit("disconnect"),this.options?.shimDisconnect&&"undefined"!=typeof localStorage&&localStorage.removeItem(A)}}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){var n,s;n=e,s=r[t],t in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r,n,s,i,o){try{var a=e[i](o),l=a.value}catch(e){r(e);return}a.done?t(l):Promise.resolve(l).then(n,s)}function C(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var i=e.apply(t,r);function o(e){w(i,n,s,o,a,"next",e)}function a(e){w(i,n,s,o,a,"throw",e)}o(void 0)})}}var M=()=>{var{state:e}=V();return e.provider},v=()=>V().state.cacheBuster,O=()=>{var e=n.useRef(null);return n.useEffect(()=>()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.call(e)},[]),n.useCallback(t=>{var r;null===(r=e.current)||void 0===r||r.call(e),t&&(e.current=t)},[])},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,[r,s]=n.useState(()=>{if("undefined"==typeof localStorage)return t;var r=localStorage.getItem(e);try{return r?JSON.parse(r):t}catch(e){return console.warn(e),t}}),i=n.useCallback(t=>{if(t!==r){if(s(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}}},[r,s,e]);return[r,i]},L={loading:!1},N=function(){var e,{addressOrName:t,skip:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=v(),i=M(),[o,a]=n.useState(L),l=O(),c=n.useCallback((e=C(function*(e){var r=!1;l(()=>{r=!0});try{var n=null!=e?e:{addressOrName:t};if(!n.addressOrName)throw Error("addressOrName is required");a(e=>S(S({},e),{},{error:void 0,loading:!0}));var s=yield i.getAvatar(n.addressOrName);return r||a(e=>S(S({},e),{},{avatar:s,loading:!1})),s}catch(e){return r||a(t=>S(S({},t),{},{error:e,loading:!1})),e}}),function(t){return e.apply(this,arguments)}),[t,l,i]);return n.useEffect(()=>{if(!r&&t)return c({addressOrName:t}),l},[t,s,l,r]),[{data:o.avatar,loading:o.loading,error:o.error},c]},B={loading:!1},R=function(){var e,{address:t,skip:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=v(),i=M(),[o,a]=n.useState(B),l=O(),c=n.useCallback((e=C(function*(e){var r=!1;l(()=>{r=!0});try{var n=null!=e?e:{address:t};if(!n.address)throw Error("address is required");a(e=>S(S({},e),{},{error:void 0,loading:!0}));var s=yield i.lookupAddress(n.address);return r||a(e=>S(S({},e),{},{ens:s,loading:!1})),{data:s,error:void 0}}catch(e){return r||a(t=>S(S({},t),{},{error:e,loading:!1})),{data:void 0,error:e}}}),function(t){return e.apply(this,arguments)}),[t,l,i]);return n.useEffect(()=>{if(!r&&t)return c({address:t}),l},[t,s,l,r]),[{data:o.ens,loading:o.loading,error:o.error},c]},I=function(){var e,{fetchEns:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:r,setState:s}=V(),i=null===(e=r.data)||void 0===e?void 0:e.account,[{data:o,error:a,loading:l}]=R({address:i,skip:!t}),[{data:c,error:h,loading:d}]=N({addressOrName:o,skip:!t||!o}),u=n.useCallback(()=>{s(e=>{var t;return null===(t=e.connector)||void 0===t||t.disconnect(),{cacheBuster:e.cacheBuster+1}})},[s]);return[{data:i?{address:i,connector:r.connector,ens:o?{avatar:c,name:o}:void 0}:void 0,error:a||h,loading:l||d},u]},_={loading:!1},D=()=>{var e,t,{state:r,setState:s,setLastUsedConnector:i}=V(),[o,a]=n.useState(_),l=O(),c=n.useCallback((e=C(function*(e){var t=!1;l(()=>{t=!0});try{var n=null==r?void 0:r.connector;if(e===n)throw new p;a(t=>S(S({},t),{},{loading:!0,connector:e,error:void 0}));var o=yield e.connect();return t||(s(t=>S(S({},t),{},{connector:e,data:o})),i(e.name),a(e=>S(S({},e),{},{loading:!1}))),{data:o,error:void 0}}catch(e){return t||a(t=>S(S({},t),{},{connector:void 0,error:e,loading:!1})),{data:void 0,error:e}}}),function(t){return e.apply(this,arguments)}),[l,r.connector,s,i]);return n.useEffect(()=>(a(e=>S(S({},e),{},{connector:r.connector,error:void 0})),l),[l,r.connector]),[{data:{connected:!!(null!==(t=r.data)&&void 0!==t&&t.account),connector:o.connector,connectors:r.connectors},error:o.error,loading:o.loading||r.connecting},c]},P={loading:!1},H=()=>{var e,t,r,s,{state:{connector:i,data:o}}=V(),[a,c]=n.useState(P),h=null==o?void 0:null===(t=o.chain)||void 0===t?void 0:t.id,d=null==o?void 0:null===(r=o.chain)||void 0===r?void 0:r.unsupported,u=null!==(s=null==i?void 0:i.chains)&&void 0!==s?s:[],p=[...u,...l].find(e=>e.id===h),f=O(),m=n.useCallback((e=C(function*(e){var t=!1;if(f(()=>{t=!0}),!(null!=i&&i.switchChain))return{data:void 0,error:new g};try{c(e=>S(S({},e),{},{error:void 0,loading:!0}));var r=yield i.switchChain(e);return t||c(e=>S(S({},e),{},{loading:!1})),{data:r,error:void 0}}catch(e){return t||c(t=>S(S({},t),{},{error:e,loading:!1})),{data:void 0,error:e}}}),function(t){return e.apply(this,arguments)}),[f,i]);return[{data:{chain:h?S(S({},p),{},{id:h,unsupported:d}):void 0,chains:u},error:a.error,loading:a.loading},null!=i&&i.switchChain?m:void 0]},F={loading:!1},U=function(){var e,{message:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:{connector:r}}=V(),[s,i]=n.useState(F),o=O(),a=n.useCallback((e=C(function*(e){var n=!1;o(()=>{n=!0});try{var s=null!=e?e:{message:t};if(!s.message)throw Error("message is required");if(!r)throw new f;i(e=>S(S({},e),{},{error:void 0,loading:!0}));var a=yield(yield r.getSigner()).signMessage(s.message);return n||i(e=>S(S({},e),{},{signature:a,loading:!1})),{data:a,error:void 0}}catch(e){var l=e;return 4001===e.code&&(l=new m),n||i(e=>S(S({},e),{},{error:l,loading:!1})),{data:void 0,error:l}}}),function(t){return e.apply(this,arguments)}),[o,r,t]);return[{data:s.signature,error:s.error,loading:s.loading},a]},K=n.createContext(null),G=e=>{var t,r,i,o,a,l,{autoConnect:c=!1,children:h,connectors:d=[new x],connectorStorageKey:u="wagmi.wallet",provider:p=(0,s.getDefaultProvider)(),webSocketProvider:f}=e,[g,m]=$(u),[b,y]=n.useState({cacheBuster:1,connecting:c}),E=n.useMemo(()=>{var e,t;return"function"!=typeof d?d:d({chainId:null===(e=b.data)||void 0===e?void 0:null===(t=e.chain)||void 0===t?void 0:t.id})},[d,null===(t=b.data)||void 0===t?void 0:null===(r=t.chain)||void 0===r?void 0:r.id]),T=n.useMemo(()=>{var e,t;return"function"!=typeof p?p:p({chainId:null===(e=b.data)||void 0===e?void 0:null===(t=e.chain)||void 0===t?void 0:t.id,connector:b.connector})},[p,null===(i=b.data)||void 0===i?void 0:null===(o=i.chain)||void 0===o?void 0:o.id,b.connector]),A=n.useMemo(()=>{var e,t;if(f)return"function"!=typeof f?f:f({chainId:null===(e=b.data)||void 0===e?void 0:null===(t=e.chain)||void 0===t?void 0:t.id,connector:b.connector})},[f,null===(a=b.data)||void 0===a?void 0:null===(l=a.chain)||void 0===l?void 0:l.id,b.connector]);n.useEffect(()=>{c&&C(function*(){y(e=>S(S({},e),{},{connecting:!0}));var e=g?[...E].sort(e=>e.name===g?-1:1):E,t=function*(e){if(!e.ready||!e.isAuthorized||!(yield e.isAuthorized()))return"continue";var t=yield e.connect();return y(r=>S(S({},r),{},{connector:e,data:t})),"break"};for(var r of e){var n=yield*t(r);if("continue"!==n&&"break"===n)break}y(e=>S(S({},e),{},{connecting:!1}))})()},[]),n.useEffect(()=>()=>{b.connector&&b.connector.disconnect()},[b.connector]),n.useEffect(()=>{if(b.connector){var e=e=>y(t=>S(S({},t),{},{cacheBuster:t.cacheBuster+1,data:S(S({},t.data),e)})),t=()=>y({cacheBuster:1}),r=e=>y(t=>S(S({},t),{},{error:e}));return b.connector.on("change",e),b.connector.on("disconnect",t),b.connector.on("error",r),()=>{b.connector&&(b.connector.off("change",e),b.connector.off("disconnect",t),b.connector.off("error",r))}}},[b.connector]);var k={state:{cacheBuster:b.cacheBuster,connecting:b.connecting,connectors:E,connector:b.connector,data:b.data,provider:T,webSocketProvider:A},setState:y,setLastUsedConnector:m};return n.createElement(K.Provider,{value:k},h)},V=()=>{var e=n.useContext(K);if(!e)throw Error("Must be used within Provider");return e}}}]);